<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sophie Donnet">
<meta name="author" content="Marie-Pierre Etienne">
<meta name="author" content="Tristan Mary-Huard">
<meta name="author" content="Francois Victor">
<meta name="author" content="Emily Walker">

<title>Finist’R 2024 - Bien démarrer avec Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Finist’R 2024</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Recherche"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Basculer la navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/StateOfTheR/finistR2024"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./instructions.html"> 
<span class="menu-text">Instructions</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./plotting_with_julia-1.html"> 
<span class="menu-text">Graphiques avec Julia</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-algorithme" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Algorithme</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-algorithme">    
        <li>
    <a class="dropdown-item" href="./01_nimble.html">
 <span class="dropdown-text">Initiation à Nimble</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./python_practice.html">
 <span class="dropdown-text">Un bon départ avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./simulator.html">
 <span class="dropdown-text">Simulations</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-développement" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Développement</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-développement">    
        <li>
    <a class="dropdown-item" href="./precommit.html">
 <span class="dropdown-text">Pre-commit avec R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rig.html">
 <span class="dropdown-text">rig - The R Installation Manager</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./packaging_and_testing.html">
 <span class="dropdown-text">Python packaging</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./pkg.html">
 <span class="dropdown-text">R packaging</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-réseaux-de-neurones" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Réseaux de Neurones</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-réseaux-de-neurones">    
        <li>
    <a class="dropdown-item" href="./Bipartite_GNN.html">
 <span class="dropdown-text">Graph Neural Networks for bipartite graphs with pytorch_geometric</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-déploiement" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Déploiement</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-déploiement">    
        <li>
    <a class="dropdown-item" href="./shiny-deployment.html">
 <span class="dropdown-text">Déploiement Shiny</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-high-performance-computing" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">High performance computing</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-high-performance-computing">    
        <li>
    <a class="dropdown-item" href="./futureverse.html">
 <span class="dropdown-text">futureverse</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./c_python.html">
 <span class="dropdown-text">C++ depuis Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./c_jax.html">
 <span class="dropdown-text">C++ depuis JAX</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./01_extract_env_data.html"> 
<span class="menu-text">Web scrapping</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reproductibilité" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reproductibilité</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-reproductibilité">    
        <li>
    <a class="dropdown-item" href="./quarto_parametre.html">
 <span class="dropdown-text">Document paramétré en quarto</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./reproducibility.html">
 <span class="dropdown-text">Reproducibility with renv, docker, and rix</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sur cette page</h2>
   
  <ul>
  <li><a href="#installation-python-et-problèmes-potentiels" id="toc-installation-python-et-problèmes-potentiels" class="nav-link active" data-scroll-target="#installation-python-et-problèmes-potentiels">Installation python et problèmes potentiels</a></li>
  <li><a href="#créer-un-environnement-avec-conda-sous-linux" id="toc-créer-un-environnement-avec-conda-sous-linux" class="nav-link" data-scroll-target="#créer-un-environnement-avec-conda-sous-linux">Créer un environnement avec conda sous Linux</a>
  <ul class="collapse">
  <li><a href="#autres-commandes" id="toc-autres-commandes" class="nav-link" data-scroll-target="#autres-commandes">Autres commandes</a></li>
  </ul></li>
  <li><a href="#installation-et-création-denvironnement-avec-windows" id="toc-installation-et-création-denvironnement-avec-windows" class="nav-link" data-scroll-target="#installation-et-création-denvironnement-avec-windows">Installation et création d’environnement avec Windows</a>
  <ul class="collapse">
  <li><a href="#installation-de-python" id="toc-installation-de-python" class="nav-link" data-scroll-target="#installation-de-python">Installation de Python</a></li>
  <li><a href="#utilisation-de-vsc" id="toc-utilisation-de-vsc" class="nav-link" data-scroll-target="#utilisation-de-vsc">Utilisation de VSC</a></li>
  <li><a href="#création-dun-environnement-python" id="toc-création-dun-environnement-python" class="nav-link" data-scroll-target="#création-dun-environnement-python">Création d’un environnement python</a></li>
  <li><a href="#programmer-exécuter-dans-un-environnement-python" id="toc-programmer-exécuter-dans-un-environnement-python" class="nav-link" data-scroll-target="#programmer-exécuter-dans-un-environnement-python">Programmer, exécuter… dans un environnement python</a></li>
  </ul></li>
  <li><a href="#utiliser-un-environnement-de-développement-agréable-pour-un-utilisateur-de-r" id="toc-utiliser-un-environnement-de-développement-agréable-pour-un-utilisateur-de-r" class="nav-link" data-scroll-target="#utiliser-un-environnement-de-développement-agréable-pour-un-utilisateur-de-r">Utiliser un environnement de développement agréable pour un utilisateur de R</a></li>
  <li><a href="#avec-visual-studio-code" id="toc-avec-visual-studio-code" class="nav-link" data-scroll-target="#avec-visual-studio-code">Avec Visual Studio Code</a>
  <ul class="collapse">
  <li><a href="#avec-positron" id="toc-avec-positron" class="nav-link" data-scroll-target="#avec-positron">Avec Positron</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bien démarrer avec Python</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Auteur·rice·s</div>
    <div class="quarto-title-meta-contents">
             <p>Sophie Donnet </p>
             <p>Marie-Pierre Etienne </p>
             <p>Tristan Mary-Huard </p>
             <p>Francois Victor </p>
             <p>Emily Walker </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>Lorsque l’on utilise Python, une bonne pratique consiste à créer un environnement spécifique par projet. L’environnement contient la version de Python que l’on souhaite utiliser ainsi que les packages/modules utiles au projet. Cette façon de faire permet de faire coexister différentes versions de python ou de packages au sein du même ordinateur. Cette pratique n’est pas spécifique à Python, on pourrait imaginer créer des environnements pour utiliser des versions différentes de R. Si le programme ou la librairie n’est pas installée dans l’environnement mais est disponible dans l’installation globale de la machine, c’est cette version globale qui sera utilisée. Il faut donc bien vérifier ce qui est dispo dans l’environnement et globalement.</p>
<p>Nous avons exploré deux manières de gérer les environnements soit avec <code>conda</code> soit avec <code>virtual env</code>. Nous avons testé sous Linux et sous Windows.</p>
<section id="installation-python-et-problèmes-potentiels" class="level2">
<h2 class="anchored" data-anchor-id="installation-python-et-problèmes-potentiels">Installation python et problèmes potentiels</h2>
<p>On crée un lien symbolique pour que <code>python 3</code> soit le <code>python</code> par défaut en utilisant les instructions suivantes:</p>
<p><code>sudo ln -sf /usr/bin/python3 /usr/bin/python</code></p>
<p>On fait de même pour <code>pip</code> qui est un des installateurs de modules/ packages.</p>
<p><code>sudo ln -sf /usr/bin/pip3 /usr/bin/pip</code></p>
</section>
<section id="créer-un-environnement-avec-conda-sous-linux" class="level2">
<h2 class="anchored" data-anchor-id="créer-un-environnement-avec-conda-sous-linux">Créer un environnement avec conda sous Linux</h2>
<p>Cette partie suppose que la commande <code>conda</code> est disponible (installée avec anaconda ou miniconda)</p>
<p>La liste des environnement disponible est donnée par</p>
<p><code>conda env list</code></p>
<p>Vous devez avoir au moins l’environnement de <code>base</code> dans cette liste. Vous avez aussi ainsi accès à l’adresse où vous trouverez vos environnements.</p>
<p>On souhaite <strong>créer un nouvel environnement nommé finistr contenant uniquement python et pip</strong>.</p>
<p>Il suffit de lancer la commande <code>conda create --name finistr python=3.11 pip</code></p>
<p>En listant les environnements disponibles, vous devez voir l’environnement finistr créé.</p>
<p><code>conda env list</code></p>
<p>Il est très important d’installer <code>pip</code> en meme temps, sinon c’est le pip global du systeme qui est utilisé et toutes les commades <code>pip install</code> lancées depuis l’environnement feront en fait des installations globales et non locales à l’environnement (plus de détails <a href="https://datumorphism.leima.is/til/programming/python/python-anaconda-install-requirements/">ici</a> )</p>
<p>Pour utiliser cette installation, il faut activer l’environnement</p>
<p><code>conda activate finistr</code></p>
<p>On peut maintenant installer les packages de son choix avec des commandes type <code>conda install</code> ou <code>pip install</code></p>
<p>Par exemple <code>pip install numpy</code></p>
<p>Pour avoir la liste des packages installés dans l’environnemnet courant <code>conda list</code></p>
<p>On quitte l’environnement avec la commande <code>conda deactivate</code>. Quand vous reviendrez à votre environnement (<code>conda activate</code>) vous aurez ces packages installés.</p>
<p>Il est possible de fournir une liste de packages à installer dans l’environnement sous forme d’un fichier txt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>conda create <span class="sc">--</span>name finistrbis python<span class="ot">=</span><span class="fl">3.11</span> pip </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>conda activate finistrbis</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>pip install <span class="sc">-</span>r requirements.txt</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Le fichier <code>requirement.txt</code> a la forme suivante</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>jupyter==1.0.0
numpy==2.1.0</code></pre>
</div>
</div>
<section id="autres-commandes" class="level3">
<h3 class="anchored" data-anchor-id="autres-commandes">Autres commandes</h3>
<p>Il est possible de supprimer un environnement avec la commande</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>conda remove <span class="sc">--</span>name finistrbis <span class="sc">--</span>all</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La liste des commandes conda est disponible dans la <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/cheatsheet.html">cheatsheet conda</a></p>
</section>
</section>
<section id="installation-et-création-denvironnement-avec-windows" class="level2">
<h2 class="anchored" data-anchor-id="installation-et-création-denvironnement-avec-windows">Installation et création d’environnement avec Windows</h2>
<p>Nous présentons ici 3 étapes importantes pour l’utilisation de Python sous Windows</p>
<ul>
<li><p>l’installation d’une version de Python,</p></li>
<li><p>l’utilisation d’un éditeur de code</p></li>
<li><p>la création et l’utilisation d’un environnement Python pour programmer.</p></li>
</ul>
<p>Différentes approches existent pour réaliser chacune de ces tâches, nous présentons ici une approche pour chaque.</p>
<section id="installation-de-python" class="level3">
<h3 class="anchored" data-anchor-id="installation-de-python">Installation de Python</h3>
<p><strong>Stratégie</strong> Python est nativement disponible sous Linux. Une possibilité pour utiliser Python sous Windows est donc d’installer un sous-environnement Linux via WSL2 (Windows subsystem for linux), et d’utiliser la version de Python qui vient avec.</p>
<section id="installer-wsl2" class="level4">
<h4 class="anchored" data-anchor-id="installer-wsl2">Installer WSL2</h4>
<p>L’installation de WSL2 se fait via la commande (terminal PowerShell) :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">wsl</span> <span class="at">--install</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Après redémarrage, on peut vérifier quelle version de linux est installée :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">wsl</span> <span class="at">-l</span> <span class="at">-v</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A noter qu’il est possible de préciser l’installation Linux que l’on veut installer :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">wsl</span> <span class="at">--instal</span> <span class="at">-d</span> <span class="op">&lt;</span>Distribution<span class="op">&gt;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Dans l’exemple qui suit nous avons utilisé Ubuntu. Il est maintenant possible de lancer un terminal Linux avec la commande</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">start</span> ubuntu.exe</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>et d’aller vérifier la version de Python disponible.</p>
</section>
<section id="python" class="level4">
<h4 class="anchored" data-anchor-id="python">Python</h4>
<p>On se place maintenant dans le terminal Ubuntu. Comme précédemment mentionné Python est directement disponible sous Linux, ce qui se vérifie de la manière suivante :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> python</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">--version</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nous allons par la suite utiliser deux fonctionnalités de python : l’installation de package via <strong>pip</strong> (“<strong>p</strong>ython <strong>i</strong>nstall <strong>p</strong>ackage”) et la création d’environnements virtuels via virtualenv. Ces deux fonctionnalités sont normalement directement disponibles, si ce n’est pas le cas l’installation se fait via</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install python3-pip</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install virtualenv  </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Il est parfois nécessaire de créer un alias python pour python3 et pip pour pip3:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="bu">alias</span> python=python3</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">alias</span> pip=pip3</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternativement on peut créer un lien symbolique entre pip3 et pip :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/bin/python3 /usr/bin/python</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/bin/pip3 /usr/bin/pip</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Une fois la vérification de python et des fonctionnalités pip et virtualenv faite, on peut interagir avec python (créer des environnements, coder, tester, etc.) via le terminal de l’éditeur de code VSC, et nous n’aurons plus besoin ni de l’invite de commande Windows, ni du terminal WSL.</p>
</section>
</section>
<section id="utilisation-de-vsc" class="level3">
<h3 class="anchored" data-anchor-id="utilisation-de-vsc">Utilisation de VSC</h3>
<p>Préalable : installer VSCode (sous Windows) !</p>
<section id="choisir-un-environnement-distant" class="level4">
<h4 class="anchored" data-anchor-id="choisir-un-environnement-distant">Choisir un environnement distant</h4>
<p>A l’ouverture de VSC, la première étape consiste à préciser que l’on souhaite travailler dans le sous-environnement Linux via WSL (où se trouve python…).</p>
<p>Pour cela, il faut - configurer VSC en installant le module d’extension “WSL” de VSC (via l’icone d’installation d’extension) - ouvrir un environnement distant via l’icone “Open a Remote Window” en bas de la fenêtre VSC, et choisir “Connect to WSL”. Le sous-environnement de travail est maintenant “WSL:Ubuntu”</p>
<p>Une fois dans cet environnement, il est conseillé d’installer le module d’extension “Python”.</p>
</section>
<section id="ouvrir-un-terminal" class="level4">
<h4 class="anchored" data-anchor-id="ouvrir-un-terminal">Ouvrir un terminal</h4>
<p>Une fois l’environnement de travail défini, on peut ouvrir un terminal. Le terminal qui s’ouvre dans VSC est l’équivalent d’un terminal WSL. On peut donc executer</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> python</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">--version</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>et vérifier que l’on obtient la même version que précédemment.</p>
</section>
</section>
<section id="création-dun-environnement-python" class="level3">
<h3 class="anchored" data-anchor-id="création-dun-environnement-python">Création d’un environnement python</h3>
<p>Dans le terminal WSL ouvert dans VSC, on peut maintenant créer un environnement python via la commande</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> venv Chemin/NomEnv  </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>ce qui crée un répertoire “NomEnv” au Chemin indiqué (si besoin, pour supprimer l’env : <code>rm -rf NomEnv</code>).</p>
<p>Cet environnement peut être activé comme suit :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> Chemin/NomEnv/bin/activate</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>ou alternativement</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span> Chemin/NomEnv/bin/activate</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note</strong> L’activation de l’environnement se traduit par un changement dans le prompteur, qui mentionne maintenant “(NomEnv)” devant le nom d’utilisateur de la session.</p>
<p>L’environnement va définir la version de Python ainsi que les packages/modules que l’on souhaite utiliser pour le projet. Par défaut la version de python de l’environnement nouvellement créé est la version de python utilisée pour créer l’environnement (ce que l’on peut vérifier avec <code>python --version</code>). Il reste donc à installer les packages nécessaires au projet, ce qui se fait avec pip. Un exemple avec le package numpy:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install numpy</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Il est possible de lister à tout moment les packages déjà inclus dans un projet avec l’instruction <code>pip list</code> Une fois l’environnement configuré, on “sort” de l’environnement avec l’instruction <code>deactivate</code>.</p>
</section>
<section id="programmer-exécuter-dans-un-environnement-python" class="level3">
<h3 class="anchored" data-anchor-id="programmer-exécuter-dans-un-environnement-python">Programmer, exécuter… dans un environnement python</h3>
<p>L’environnement NomEnv étant maintenant disponible, on peut se placer dedans pour travailler et écrire nos premières lignes de code. Il suffit pour cela d’ouvrir/créer un fichier python (toujours dans VSC).</p>
<section id="execution-en-ligne-de-commande" class="level4">
<h4 class="anchored" data-anchor-id="execution-en-ligne-de-commande">Execution en ligne de commande</h4>
<p>Tout est prêt mais l’exécution du code ligne à ligne n’est pas directement accessible sur python. Pour y avoir accès il suffit d’installer le package ipython dans l’environnement python (cf paragraphe précédent) d’une part, et d’installer l’extension “iPython for VS Code” dans VSC. Une fois ces deux étapes réalisées, l’exécution de la commande <code>iPython</code> dans le terminal à l’exécution en ligne.</p>
<p><strong>REMARQUE</strong> <em>(fonctionne sur toutes les distributions en théorie, mais uniquement testé sur MacOS)</em><strong>:</strong> Afin de retrouver la fonctionnalité d’exécution d’une ligne de code avec <code>shift + enter</code> dans la console de R studio, il est nécéssaire de modifier le fichier <code>settings.json</code> de VSC (en mode WSL). Pour cela, taper <code>ctrl + shift + P</code> et rechercher <code>Open User Settings (JSON)</code>. Rajouter à la suite des options existantes:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="er">"python.terminal.launchArgs":</span> <span class="ot">[</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>     <span class="st">"-m"</span><span class="ot">,</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"IPython"</span><span class="ot">,</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"--no-autoindent"</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span><span class="er">,</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="utiliser-un-environnement-de-développement-agréable-pour-un-utilisateur-de-r" class="level2">
<h2 class="anchored" data-anchor-id="utiliser-un-environnement-de-développement-agréable-pour-un-utilisateur-de-r">Utiliser un environnement de développement agréable pour un utilisateur de R</h2>
</section>
<section id="avec-visual-studio-code" class="level2">
<h2 class="anchored" data-anchor-id="avec-visual-studio-code">Avec Visual Studio Code</h2>
<p>ipython</p>
<section id="avec-positron" class="level3">
<h3 class="anchored" data-anchor-id="avec-positron">Avec Positron</h3>
<p>Le nouvel IDE Positron (disponible en version beta) semble avoir des avantages intéressants pour les gens qui aiment Rstudio mais veulent faire du python. Notamment, il est possible</p>
<ul>
<li><p>de choisir facilement son environnement (menu déroulant en haut à droite) et</p></li>
<li><p>d’utiliser la commande Ctr+entr pour éxécuter un code Python ligne à ligne comme on le fera pour un code R dans Rstudio.</p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>