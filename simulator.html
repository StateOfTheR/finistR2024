<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Julie Aubert">
<meta name="author" content="Caroline Cognot">
<meta name="author" content="Annaïg De Walsche">
<meta name="author" content="Cédric Midoux">
<meta name="author" content="Pierre Neuvial">
<meta name="author" content="Aymeric Stamm">
<meta name="author" content="Florian Teste">
<meta name="dcterms.date" content="2024-08-19">

<title>Finist’R 2024 - Setting up simulations in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.33/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Finist’R 2024</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/StateOfTheR/finistR2024"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./instructions.html"> 
<span class="menu-text">Instructions</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./plotting_with_julia-1.html"> 
<span class="menu-text">Graphiques avec Julia</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-algorithme" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Algorithme</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-algorithme">    
        <li>
    <a class="dropdown-item" href="./01_nimble.html">
 <span class="dropdown-text">Initiation à Nimble</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./python_practice.html">
 <span class="dropdown-text">Un bon départ avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./simulator.html">
 <span class="dropdown-text">Simulations</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-développement" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Développement</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-développement">    
        <li>
    <a class="dropdown-item" href="./precommit.html">
 <span class="dropdown-text">Pre-commit avec R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./packaging_and_testing.html">
 <span class="dropdown-text">Python packaging</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./pkg.html">
 <span class="dropdown-text">R packaging</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-réseaux-de-neurones" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Réseaux de Neurones</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-réseaux-de-neurones">    
        <li>
    <a class="dropdown-item" href="./Bipartite_GNN.html">
 <span class="dropdown-text">Graph Neural Networks for bipartite graphs with pytorch_geometric</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-déploiement" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Déploiement</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-déploiement">    
        <li>
    <a class="dropdown-item" href="./shiny-deployment.html">
 <span class="dropdown-text">Déploiement Shiny</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-high-performance-computing" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">High performance computing</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-high-performance-computing">    
        <li>
    <a class="dropdown-item" href="./futureverse.html">
 <span class="dropdown-text">futureverse</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./c_python.html">
 <span class="dropdown-text">C++ depuis Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./c_jax.html">
 <span class="dropdown-text">C++ depuis JAX</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#how-to-choose" id="toc-how-to-choose" class="nav-link" data-scroll-target="#how-to-choose">How to choose?</a></li>
  <li><a href="#a-common-simulation-problem-power-curve-for-test-calibration" id="toc-a-common-simulation-problem-power-curve-for-test-calibration" class="nav-link" data-scroll-target="#a-common-simulation-problem-power-curve-for-test-calibration">A common simulation problem: power curve for test calibration</a></li>
  <li><a href="#simpr" id="toc-simpr" class="nav-link" data-scroll-target="#simpr">{<strong>simpr</strong>}</a>
  <ul class="collapse">
  <li><a href="#simpr-solution" id="toc-simpr-solution" class="nav-link" data-scroll-target="#simpr-solution">{<strong>simpr</strong>} solution</a></li>
  <li><a href="#philosophy" id="toc-philosophy" class="nav-link" data-scroll-target="#philosophy">Philosophy</a></li>
  <li><a href="#reproducible-workflows" id="toc-reproducible-workflows" class="nav-link" data-scroll-target="#reproducible-workflows">Reproducible workflows</a></li>
  <li><a href="#other-features" id="toc-other-features" class="nav-link" data-scroll-target="#other-features">Other features</a></li>
  <li><a href="#pros-cons" id="toc-pros-cons" class="nav-link" data-scroll-target="#pros-cons">Pros &amp; cons</a></li>
  </ul></li>
  <li><a href="#simulator" id="toc-simulator" class="nav-link" data-scroll-target="#simulator">{<strong>simulator</strong>}</a>
  <ul class="collapse">
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting started</a></li>
  <li><a href="#example-power-curve" id="toc-example-power-curve" class="nav-link" data-scroll-target="#example-power-curve">Example: power curve</a></li>
  <li><a href="#important-functions" id="toc-important-functions" class="nav-link" data-scroll-target="#important-functions">Important functions</a></li>
  </ul></li>
  <li><a href="#pros-cons-1" id="toc-pros-cons-1" class="nav-link" data-scroll-target="#pros-cons-1">Pros &amp; cons</a></li>
  <li><a href="#simengine" id="toc-simengine" class="nav-link" data-scroll-target="#simengine">{<strong>simEngine</strong>}</a>
  <ul class="collapse">
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#parallelization" id="toc-parallelization" class="nav-link" data-scroll-target="#parallelization">Parallelization</a></li>
  </ul></li>
  <li><a href="#pros-cons-2" id="toc-pros-cons-2" class="nav-link" data-scroll-target="#pros-cons-2">Pros &amp; cons</a>
  <ul class="collapse">
  <li><a href="#simulation-based-power-calculation" id="toc-simulation-based-power-calculation" class="nav-link" data-scroll-target="#simulation-based-power-calculation">Simulation-based power calculation</a></li>
  </ul></li>
  <li><a href="#simchef" id="toc-simchef" class="nav-link" data-scroll-target="#simchef">{<strong>simChef</strong>}</a>
  <ul class="collapse">
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#step-1-define-the-data-generating-process-methods-and-evaluation-functions" id="toc-step-1-define-the-data-generating-process-methods-and-evaluation-functions" class="nav-link" data-scroll-target="#step-1-define-the-data-generating-process-methods-and-evaluation-functions">Step 1: Define the Data-Generating Process, Methods, and Evaluation Functions</a></li>
  <li><a href="#step-2-convert-functions-into-simchef-class-objects" id="toc-step-2-convert-functions-into-simchef-class-objects" class="nav-link" data-scroll-target="#step-2-convert-functions-into-simchef-class-objects">Step 2: Convert Functions into {<strong>simChef</strong>} Class Objects</a></li>
  <li><a href="#step-3-assemble-the-simulation-experiment" id="toc-step-3-assemble-the-simulation-experiment" class="nav-link" data-scroll-target="#step-3-assemble-the-simulation-experiment">Step 3: Assemble the Simulation Experiment</a></li>
  <li><a href="#step-4-run-the-experiment" id="toc-step-4-run-the-experiment" class="nav-link" data-scroll-target="#step-4-run-the-experiment">Step 4: Run the Experiment</a></li>
  </ul></li>
  <li><a href="#pros-cons-3" id="toc-pros-cons-3" class="nav-link" data-scroll-target="#pros-cons-3">Pros &amp; cons</a></li>
  <li><a href="#tentative-conclusion" id="toc-tentative-conclusion" class="nav-link" data-scroll-target="#tentative-conclusion">Tentative conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Setting up simulations in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Julie Aubert </p>
             <p>Caroline Cognot </p>
             <p>Annaïg De Walsche </p>
             <p>Cédric Midoux </p>
             <p>Pierre Neuvial </p>
             <p>Aymeric Stamm </p>
             <p>Florian Teste </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 19, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>We explore several R packages for generate or structure simulations. Most statistical simulations studies includes different steps : generate data/ run one or several methods using simulated data / compare results.</p>
<p>We identified the following list of packages for data simulation:</p>
<ul>
<li><p><a href="https://jacobbien.github.io/simulator/">{<strong>simulator</strong>}</a>: A framework for performing simulations such as those common in methodological statistics papers. The design principles of this package are described in greater depth in Bien, J. (2016) “The simulator: An Engine to Streamline Simulations,” which is available at <a href="doi:10.48550/arXiv.1607.00021" class="uri">doi:10.48550/arXiv.1607.00021</a>.</p></li>
<li><p><a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a>: A general, ‘tidyverse’-friendly framework for simulation studies, design analysis, and power analysis. Specify data generation, define varying parameters, generate data, fit models, and tidy model results in a single pipeline, without needing loops or custom functions.</p></li>
<li><p><a href="https://declaredesign.org/r/declaredesign/">{<strong>DeclareDesign</strong>}</a>: Researchers can characterize and learn about the properties of research designs before implementation using ‘DeclareDesign’. Ex ante declaration and diagnosis of designs can help researchers clarify the strengths and limitations of their designs and to improve their properties, and can help readers evaluate a research strategy prior to implementation and without access to results. It can also make it easier for designs to be shared, replicated, and critiqued.</p></li>
<li><p><a href="https://github.com/FunWithR/MonteCarlo">{<strong>MonteCarlo</strong>}</a>: Simplifies Monte Carlo simulation studies by automatically setting up loops to run over parameter grids and parallelising the Monte Carlo repetitions. It also generates LaTeX tables.</p></li>
<li><p><a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a>: The goal is to help you quickly cook up a fully-realized, high-quality, reproducible, and transparently-documented simulation study in a flexible, efficient, and low-code manner. It removes many of the administrative burdens of simulation design through:</p>
<ol type="1">
<li>An intuitive tidy grammar of data science simulations</li>
<li>Powerful abstractions for distributed simulation processing backed by future</li>
<li>Automated generation of interactive R Markdown simulation documentation, situating results next to the workflows needed to reproduce them.</li>
</ol></li>
<li><p><a href="https://cran.r-project.org/web/packages/SimEngine/vignettes/SimEngine.html">{<strong>simEngine</strong>}</a>: An open-source R package for structuring, maintaining, running, and debugging statistical simulations on both local and cluster-based computing environments. See full documentation at <a href="https://avi-kenny.github.io/SimEngine/" class="uri">https://avi-kenny.github.io/SimEngine/</a>.</p></li>
</ul>
</section>
<section id="how-to-choose" class="level2">
<h2 class="anchored" data-anchor-id="how-to-choose">How to choose?</h2>
<p>Here is a comparison of the different packages summarised in a table:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Version</th>
<th>#deps</th>
<th>#rev deps</th>
<th>Latest commit</th>
<th>Latest release</th>
<th>Doc</th>
<th>On CRAN?</th>
<th>Developers</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://declaredesign.org/r/declaredesign/">{<strong>DeclareDesign</strong>}</a></td>
<td>1.0.10</td>
<td>2</td>
<td>1</td>
<td>2024-04-13</td>
<td>2024-04-21</td>
<td></td>
<td>Yes</td>
<td>Graeme Blair</td>
</tr>
<tr class="even">
<td><a href="https://github.com/FunWithR/MonteCarlo">{<strong>MonteCarlo</strong>}</a></td>
<td>1.0.6</td>
<td>6</td>
<td>0</td>
<td>2019-01-31</td>
<td>2019-01-31</td>
<td></td>
<td>Yes</td>
<td>Christian Hendrik Leschinski</td>
</tr>
<tr class="odd">
<td><a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a></td>
<td>0.1.0</td>
<td>22</td>
<td>0</td>
<td>2024-03-20</td>
<td>NA</td>
<td></td>
<td>No</td>
<td>Tiffany Tang, James Duncan</td>
</tr>
<tr class="even">
<td><a href="https://cran.r-project.org/web/packages/SimEngine/vignettes/SimEngine.html">{<strong>simEngine</strong>}</a></td>
<td>1.4.0</td>
<td>6</td>
<td>0</td>
<td>2024-04-13</td>
<td>2024-04-04</td>
<td></td>
<td>Yes</td>
<td>Avi Kenny, Charles Wolock</td>
</tr>
<tr class="odd">
<td><a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a></td>
<td>0.2.6</td>
<td>11</td>
<td>0</td>
<td>2024-07-16</td>
<td>2023-04-26</td>
<td></td>
<td>Yes</td>
<td>Ethan Brown</td>
</tr>
<tr class="even">
<td><a href="https://jacobbien.github.io/simulator/">{<strong>simulator</strong>}</a></td>
<td>0.2.5</td>
<td>1</td>
<td>0</td>
<td>2023-02-02</td>
<td>2023-02-04</td>
<td></td>
<td>Yes</td>
<td>Jacob Bien</td>
</tr>
</tbody>
</table>
<p>This table shows that all packages are on CRAN, except for <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a>. The latest release of <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a> is not available, but the latest commit was in March 2024 so it is actively maintained. The number of dependencies is quite high for <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a> and <a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a>. The number of reverse dependencies is low for all packages. The package <a href="https://github.com/FunWithR/MonteCarlo">{<strong>MonteCarlo</strong>}</a> seams not to be maintained anymore.</p>
<p>Also, in terms of philosophy, the <a href="https://declaredesign.org/r/declaredesign/">{<strong>DeclareDesign</strong>}</a> package is dedicated to <em>experimental design</em>. It also makes it possible to simulate an experimental design of interest, in order to understand the properties of this design. As its goal is not to evaluate computational methods via simulations, it does not address the question of interest and we did not evaluate it further. The underlying experimental design principles are described in the companion book: <a href="https://book.declaredesign.org/" class="uri">https://book.declaredesign.org/</a>.</p>
<p>In the following, we will therefore focus on the packages <a href="https://cran.r-project.org/web/packages/SimEngine/vignettes/SimEngine.html">{<strong>simEngine</strong>}</a>, <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a>, <a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a>, and <a href="https://jacobbien.github.io/simulator/">{<strong>simulator</strong>}</a>. The next section describes the common simulation problem we will use to compare the packages. Then, we will show how to solve this problem with each package. Finally, we will compare the packages based on the code, the output, and the ease of use.</p>
</section>
<section id="a-common-simulation-problem-power-curve-for-test-calibration" class="level2">
<h2 class="anchored" data-anchor-id="a-common-simulation-problem-power-curve-for-test-calibration">A common simulation problem: power curve for test calibration</h2>
<p>We consider a common simulation problem: power curve estimation for hypothesis test calibration.</p>
<p>We consider a two-sample paired t-test simple example. The first sample is generated from a normal distribution with mean <code>0</code> and standard deviation <code>sd</code>. The second sample is generated from a normal distribution with mean <code>mean_diff</code> and standard deviation <code>sd</code>. The sample size is <code>n</code>. We want to estimate the power of the paired t-test for different values of <code>mean_diff</code> and <code>ds</code>. Specifically, we will use the following parameters:</p>
<ul>
<li><code>n</code>: 100, 150, 200;</li>
<li><code>mean_diff</code>: 10, 20, 30;</li>
<li><code>sd</code>: 50, 100.</li>
</ul>
<p>We will estimate the power by simulating the paired t-test for each combination of parameters. We will repeat the simulation 10 times for each combination of parameters.</p>
<p>The base R solution for this problem can look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Set up parameters</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>ns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>L, <span class="dv">150</span>L, <span class="dv">200</span>L)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>mean_diffs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>sds <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">100</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>reps <span class="ot">&lt;-</span> <span class="dv">10</span>L</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Bring together into data frame</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>results_template <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> ns, </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean_diff =</span> mean_diffs, </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> sds, </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">p.value =</span> <span class="cn">NA_real_</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>base_r_sim <span class="ot">&lt;-</span> results_template[<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(results_template), <span class="at">each =</span> reps), ]</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="do">## Loop over rows of the data frame and calculate the p-value</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(results_template)) {</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  params <span class="ot">&lt;-</span> base_r_sim[i,]</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  pre <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(params<span class="sc">$</span>n, <span class="dv">0</span>, params<span class="sc">$</span>sd)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  post <span class="ot">&lt;-</span> pre <span class="sc">+</span> <span class="fu">rnorm</span>(params<span class="sc">$</span>n, params<span class="sc">$</span>mean_diff, params<span class="sc">$</span>sd)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  base_r_sim<span class="sc">$</span>p.value[i] <span class="ot">&lt;-</span> <span class="fu">t.test</span>(pre, post)<span class="sc">$</span>p.value</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="do">## Display table output</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(base_r_sim)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-4f3f6d98d48d0314cb56" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4f3f6d98d48d0314cb56">{"x":{"filter":"none","vertical":false,"data":[["1","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2","2.1","2.2","2.3","2.4","2.5","2.6","2.7","2.8","2.9","3","3.1","3.2","3.3","3.4","3.5","3.6","3.7","3.8","3.9","4","4.1","4.2","4.3","4.4","4.5","4.6","4.7","4.8","4.9","5","5.1","5.2","5.3","5.4","5.5","5.6","5.7","5.8","5.9","6","6.1","6.2","6.3","6.4","6.5","6.6","6.7","6.8","6.9","7","7.1","7.2","7.3","7.4","7.5","7.6","7.7","7.8","7.9","8","8.1","8.2","8.3","8.4","8.5","8.6","8.7","8.8","8.9","9","9.1","9.2","9.3","9.4","9.5","9.6","9.7","9.8","9.9","10","10.1","10.2","10.3","10.4","10.5","10.6","10.7","10.8","10.9","11","11.1","11.2","11.3","11.4","11.5","11.6","11.7","11.8","11.9","12","12.1","12.2","12.3","12.4","12.5","12.6","12.7","12.8","12.9","13","13.1","13.2","13.3","13.4","13.5","13.6","13.7","13.8","13.9","14","14.1","14.2","14.3","14.4","14.5","14.6","14.7","14.8","14.9","15","15.1","15.2","15.3","15.4","15.5","15.6","15.7","15.8","15.9","16","16.1","16.2","16.3","16.4","16.5","16.6","16.7","16.8","16.9","17","17.1","17.2","17.3","17.4","17.5","17.6","17.7","17.8","17.9","18","18.1","18.2","18.3","18.4","18.5","18.6","18.7","18.8","18.9"],[100,100,100,100,100,100,100,100,100,100,150,150,150,150,150,150,150,150,150,150,200,200,200,200,200,200,200,200,200,200,100,100,100,100,100,100,100,100,100,100,150,150,150,150,150,150,150,150,150,150,200,200,200,200,200,200,200,200,200,200,100,100,100,100,100,100,100,100,100,100,150,150,150,150,150,150,150,150,150,150,200,200,200,200,200,200,200,200,200,200,100,100,100,100,100,100,100,100,100,100,150,150,150,150,150,150,150,150,150,150,200,200,200,200,200,200,200,200,200,200,100,100,100,100,100,100,100,100,100,100,150,150,150,150,150,150,150,150,150,150,200,200,200,200,200,200,200,200,200,200,100,100,100,100,100,100,100,100,100,100,150,150,150,150,150,150,150,150,150,150,200,200,200,200,200,200,200,200,200,200],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],[0.442425146630142,0.3734897853687503,0.170364763076542,0.09921867296345646,0.08376414157330929,0.0252125158014231,0.1046037201598432,0.5028807455673228,0.05166744745823348,0.03340755070514581,0.1639897334864937,0.02607535963665028,0.0966112617895936,0.01809106880233722,0.1090882973230379,0.1463055150749066,0.04743192496380731,0.1210909182920556,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>n<\/th>\n      <th>mean_diff<\/th>\n      <th>sd<\/th>\n      <th>p.value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"n","targets":1},{"name":"mean_diff","targets":2},{"name":"sd","targets":3},{"name":"p.value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="simpr" class="level2">
<h2 class="anchored" data-anchor-id="simpr"><a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a></h2>
<p>What is bad in the base R solution according to <a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a> authors:</p>
<ul>
<li>Most important pieces (data generating process, model specification, definitions, varying parameters) are hidden;</li>
<li>What if there is an error?</li>
<li>What about parallelization?</li>
<li>Is this code sufficiently readable? Without the comments?</li>
</ul>
<section id="simpr-solution" class="level3">
<h3 class="anchored" data-anchor-id="simpr-solution"><a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a> solution</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>simpr_tbl <span class="ot">&lt;-</span> <span class="fu">specify</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">pre  =</span> <span class="sc">~</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, sd),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">post =</span> <span class="sc">~</span> pre <span class="sc">+</span> <span class="fu">rnorm</span>(n, mean_diff, sd)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">define</span>(<span class="at">n =</span> ns, <span class="at">mean_diff =</span> mean_diffs, <span class="at">sd =</span> sds) <span class="sc">|&gt;</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate</span>(reps, <span class="at">.progress =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">t =</span> <span class="sc">~</span> <span class="fu">t.test</span>(post, pre, <span class="at">paired =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy_fits</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'purrr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:magrittr':

    set_names</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(simpr_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-dfac6c5a37994c12c81e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-dfac6c5a37994c12c81e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],[100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200,100,150,200],[10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30,10,10,10,20,20,20,30,30,30],[50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100,50,50,50,50,50,50,50,50,50,100,100,100,100,100,100,100,100,100],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],["t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t"],[5.840183824906661,5.913309357658604,14.70561689345081,27.59167410754103,21.97847851427605,18.59468811239533,27.20559449500177,27.82195581482073,29.93395780077269,11.3168558463584,19.70478238899253,-0.04216045259280771,22.36141554150707,5.745718062975275,26.29398169402328,33.81976148715309,25.11554717463929,30.33936251852382,5.800658404302652,5.742007702622419,7.385603270733124,20.03133339713057,18.0556634423453,16.9962949504426,24.99905610652348,36.65426682208651,24.25205137436532,10.6108700189294,11.32129900282332,0.2644004023149414,22.94182639449327,10.38108900572935,18.92145141895364,29.40088833652335,26.04290122413122,59.22058253644562,2.056034376111781,4.458866960768613,13.09638527691819,22.31450730172292,24.35895014062188,16.55788790808834,35.75471819681533,29.86361476130301,31.95336053898365,-3.589413018492872,12.56831908106307,4.702870814302823,11.85381524919204,16.13818052143588,8.702406811271709,38.61699120280955,27.82268959176958,30.17389841047086,12.59207345683286,8.552374167364759,14.42973965479944,24.27030773024185,15.7087981523141,20.12900393639939,43.36728744815841,36.95724668306229,32.6420081179641,14.88693684122021,12.08342800165953,26.8340502144117,21.96506211454017,25.0664604747863,28.93272617473343,25.75175016963792,32.49667556262521,37.8966798506469,4.070366785404914,9.422954348553404,13.37819712795793,9.522424523847583,16.29624750756527,20.8830778495384,29.05847629680858,31.07756045277977,32.75675414278038,21.69913220143479,11.1625373488567,11.28541032945669,9.261031824331516,14.96834651612262,21.05109091202154,28.48780201936763,25.73623499488492,24.33383024097019,6.018216335818354,5.245842477019799,14.60937420368758,23.00756769373704,17.84898471972959,16.82675217777724,25.75259999099161,30.94671988808494,21.15558998250149,-8.354122119200975,9.692464169558278,-2.966878745343652,10.52397858948604,12.72232281203257,23.69246605445678,36.85320918663736,40.35526626979102,32.96319972269985,8.653333079904135,9.631611880161071,13.38397958480757,10.23505238079581,20.13866571872493,15.88240050081906,39.14172746765556,34.55468180437896,27.48951218868442,29.47724812031065,11.95143384226147,5.813073793884891,15.00386037369291,9.076038513975115,23.9964725655339,37.41876305637182,35.25245554559887,28.68113971250638,8.698758902262778,15.99761351632321,7.266773001956677,16.07437519846294,17.89986963121508,18.48828753488053,22.93347206493171,32.89835134344891,33.7631870882572,18.655187844909,6.559519706186609,11.87873950612469,44.00781860987468,31.71336050076752,14.42417720687518,36.72234640121294,29.45188176111279,33.76397689541488,12.67547540786811,-3.937462761654531,11.23833440722948,13.91858367711642,25.22440175814518,25.96932596278768,24.3281909726197,33.17394614176494,30.41527083309478,9.562204155031337,7.330327352873538,10.36489474945681,19.03241485920247,15.39047024783743,19.96614406439365,34.34228488819058,22.25566365850034,30.41376854726141,-4.069453811275311,10.07945295857522,6.819396709516428,17.60244394046102,20.26391697957553,24.69263062141123,24.89210394505911,39.19446439645659,31.17083918960628,-5.971517872734714,17.00999708554574,0.7092912354939667,22.77925190662377,28.73043079911686,15.92805501296726,35.90987107691244,29.44215051012004,29.47664283852504],[1.090652717869697,1.462200620329634,4.459736173238225,5.539303728405496,5.122389733108947,5.346399985058943,5.032230797186227,6.586151018391802,8.618906895744537,1.026537118067978,2.444810574793671,-0.006177370841994818,2.152651755144436,0.7546910091344031,4.114880188906943,3.289134971347272,3.274674353515359,4.270829088918419,1.123024617740555,1.371671824496897,2.343045610718261,4.636114748532734,4.339632660305011,4.799640646029088,4.858287919824448,8.302112239354248,7.151034394344777,0.9738371320753861,1.468116778353514,0.03611801328426503,2.339614163505591,1.348894855548115,2.87104748426299,3.003934442517594,2.939683466686737,8.029367811793932,0.3822827489502509,1.089661531778615,3.981605422022353,4.331882397989271,6.276750594305923,4.625906223148651,6.77653789966358,7.535810873144721,9.59417748643963,-0.3398139457029209,1.652047490421286,0.6973272598293863,1.246909311842807,1.941946356292337,1.228581966340025,3.63243599011482,3.288735857336564,4.285566207891234,2.466135983475113,2.105590584238488,4.27476050981968,4.654281157519073,3.759730371854181,5.63391682309079,8.388476440078179,9.551347746026551,9.51585170610527,1.405203342397872,1.437454827715924,3.914627028009771,2.148863102764226,3.030835422934854,3.994383496414939,2.637108910626977,3.752490226936752,5.227956381784941,0.8622962815778352,2.204038225549157,3.430200941940864,2.017932983398618,4.149336292584863,6.049309113318992,6.264396699847961,7.77797535167708,9.604605980245498,2.11570171690928,1.469531299756422,1.652726405721711,0.8955193600203918,1.856047674408078,2.964930616535522,2.789277661843524,3.161951784980284,3.361309814617031,1.110139669446758,1.242173351912648,4.216570356770444,4.71627675532874,4.329973652748894,4.574379253249327,4.95283300347195,7.814886456562919,5.732313464192153,-0.8286854198697509,1.221851180304141,-0.4203698907776884,1.186488191192093,1.526060072987251,3.321618815103259,3.663226517413779,4.604358336628956,4.593794504714206,1.839452524621198,2.290645882347636,3.87067657288917,2.426221498148346,5.130211443981315,4.643561054397123,7.928166116032966,8.029948712655127,8.268958911827115,3.0525500376573,1.467960625691479,0.8340718845481584,1.335453131135293,1.064054718824149,3.423864373301119,3.568117599247875,4.874186396686905,3.946848281790122,1.872060607557826,3.912322450935712,2.00626464330834,3.331653995024346,4.375873390938403,5.120381421929753,4.760051642749757,7.828127461841941,9.271066592252945,1.832422577404145,0.8292598671108442,1.519097834474844,4.116196659969418,3.968904619443617,1.992368200335049,3.874272891007724,4.01316005147179,5.272082829759965,2.569349759410607,-1.028304378686566,3.003472609017151,2.764200823013228,5.617824872345586,7.498424500167636,5.040570956559123,8.191075536620055,8.237115075628601,0.9605474349909934,0.8410666068901288,1.697232663895776,2.114642433151743,1.800244138531347,2.779589311583894,3.153638882140866,2.616039079938143,4.272305003872783,-0.9652685674530777,2.59689216014218,1.936009931210216,3.716723701203434,5.610670889911415,7.200216558137934,4.63144141650475,10.53108055598607,8.145658503973593,-0.5653698168292797,2.048913696406633,0.0991507712384503,2.096895242765504,3.65202360707064,2.164549327607376,3.886018905708307,3.594316057028736,4.217678375934237],[0.2780731508314703,0.1457922196321031,1.370498968791511e-05,2.507096570188358e-07,9.200867133311626e-07,2.448090729618163e-07,2.171054782807167e-06,7.270888732472416e-10,2.097668609523728e-15,0.3071401447985176,0.01565907490125156,0.9950773907260473,0.0337761016747862,0.4516255758785888,5.669990068777401e-05,0.001392388465353066,0.001315471722589775,3.014917213371169e-05,0.2641430961780339,0.1722275536088748,0.02011434290034772,1.08546736937907e-05,2.620337652610471e-05,3.116114733907293e-06,4.440653363770168e-06,5.715608118580286e-14,1.606108046429338e-11,0.3325108974962653,0.1441803721691844,0.9712244633714278,0.02131188533900995,0.1794171890544063,0.004533895358699525,0.003375335627552939,0.003809593698980351,8.398978689325696e-14,0.7030710745918822,0.2776214346530678,9.592123171313069e-05,3.549189299950984e-05,3.576083129485427e-09,6.709766227811739e-06,8.945963970066855e-10,4.359779684506622e-12,3.704718568755458e-18,0.7347165300895646,0.1006307097834302,0.4864118821715313,0.2153727282483316,0.05403000054989168,0.220679526810688,0.0004470200642624923,0.001255742671384198,2.837659400079898e-05,0.01537706223633551,0.03691710576499733,2.966619915407732e-05,1.009857528105931e-05,0.0002437352035393287,5.957308310660398e-08,3.506515268899132e-13,3.682741194906196e-17,6.221981169640753e-18,0.1630910751079846,0.1526855500455418,0.0001243137570073029,0.03408350095105618,0.00287646742343018,9.125747594539556e-05,0.009710279260570541,0.0002502548174444645,4.317514743635314e-07,0.390608467858924,0.02905578492548477,0.0007332527685766408,0.04630400985323826,5.584049210005611e-05,7.092638533762914e-09,9.735816242695853e-09,1.127630207371115e-12,3.457216019221222e-18,0.03687929087914576,0.1437970397068159,0.09996336943742051,0.3726817565527024,0.06542191748722317,0.00339749684253825,0.006336593099559765,0.001899138899544183,0.0009300634926190159,0.2696280159056846,0.2161241689771514,3.763385324026e-05,7.883713705313521e-06,2.724469126215192e-05,8.390269556110667e-06,3.014766606866023e-06,9.162239273527882e-13,3.631118528165014e-08,0.4092758831227361,0.2236934428206693,0.6746688242951966,0.238269101737522,0.1291147983588933,0.001064816845629731,0.0004022578572841595,8.800369808647767e-06,7.714255107467333e-06,0.0688454505948151,0.02338659886428589,0.0001471033283044005,0.017066543446522,8.881882133471356e-07,6.212496145947324e-06,3.419604080868102e-12,2.712852171564557e-13,1.902181183741889e-14,0.002913710851936023,0.1442227376782902,0.4052405539136285,0.1847904401941789,0.2890252800276594,0.0007495805625545142,0.0005561966661725714,2.768484939790589e-06,0.0001097814198402787,0.06414993665036568,0.0001385557083933895,0.04618186838231595,0.001214569985777935,2.26268427489047e-05,7.172793806628868e-07,6.611892498857703e-06,8.503868298511201e-13,3.114230086534834e-17,0.06989446306003937,0.4082838932811422,0.1303250232630139,7.983398433398577e-05,0.0001119182254279703,0.04769751200380271,0.0001921959646145156,9.456251051502216e-05,3.498499943505459e-07,0.01168035890686606,0.3054730729062062,0.003011801152407034,0.006806087783494398,9.220968534159798e-08,2.088865049536645e-12,2.097123114255641e-06,1.081346463935839e-13,2.319992839243123e-14,0.3391199172995171,0.4016583694589777,0.09121604087969332,0.03697177421190821,0.07384505047981153,0.005964665950118523,0.002135054761420916,0.009811442272120328,2.99669806143171e-05,0.3367623444313521,0.01034981399026342,0.05428316010546524,0.0003344209176621925,9.541145071171321e-08,1.207124639777029e-11,1.105788483442519e-05,9.876940775255313e-20,4.095357434366097e-14,0.5731013253264213,0.04222509868441755,0.921118367935561,0.03855131268857495,0.0003595948956001616,0.03161283105517133,0.0001843127533666921,0.0004414076590457686,3.746461460047454e-05],[99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199,99,149,199],[-4.784822243381582,-2.077917736645321,8.203250757015585,17.70814538784213,13.50006015242111,11.73625682890916,16.47838345270368,19.47465992596998,23.08523966347225,-10.55775230348269,3.778432075560536,-13.50073085827619,1.749674848712469,-9.298339001846546,13.69322859901317,13.41751450550027,9.96025329673496,16.33086364834761,-4.448239575633322,-2.529856371669777,1.169723973998178,11.4580962264922,9.834177504066005,10.01328152770079,14.78896734298716,27.93006361080685,17.56434875933807,-11.00903691332132,-3.916614185000425,-14.1712248228103,3.484959727171331,-4.826299909509808,5.925400271466104,9.980444200553386,8.537235533483921,44.67642189709714,-8.615695575940823,-3.626928137146051,6.61018187011659,12.09335640553759,16.69039524914539,9.49950110898947,25.28549054757007,22.03288528903554,25.38576904771267,-24.54845324506739,-2.464641090832409,-8.596274957374073,-7.009257578180954,-0.2831059219079151,-5.265540409499088,17.5224726008572,11.10562757858094,16.28970818922258,2.460675279242759,0.5263105148464368,7.773268613026141,13.92337027873758,7.452676280648111,13.08354652407714,33.10915445897465,29.31141403214437,25.877650757872,-6.134157790635419,-4.527189947899028,13.31664982084419,1.682965719355707,8.723885143447529,14.6491505554878,6.375584470260131,15.38434341532555,23.60225954957661,-5.295892755916927,0.9748785621791348,5.687328918400589,0.1591025920170048,8.5355847048467,14.07560260598582,19.85434635133449,23.18223214322373,26.03134595496315,1.348538540387146,-3.847228623085912,-2.179818202437215,-11.25878846699244,-0.9674779629059627,7.050143889488707,8.222347470498097,9.652770428610614,10.0580691725548,-4.738490410636475,-3.0990908985931,7.77703212687948,13.32789701259972,9.703478108582557,9.572953959822248,15.43552582076834,23.12176598184395,13.87791677532285,-28.35735896527342,-5.982470087623554,-16.88451672616634,-7.075738685753091,-3.751129296691936,9.626880541419476,16.8913635183788,23.03634100198795,18.81324213405507,-0.6810150237008538,1.322954420597619,6.565371614497869,1.864602918597433,12.38181801842908,9.137705375865295,29.34555543757712,26.0514510815351,20.9338956912762,10.31646297841426,-4.136321068375063,-7.930500498011533,-7.288883114360769,-7.778707193696833,10.17583133816582,16.61032782444475,20.96097979256763,14.35123465544564,-0.5211481893936608,7.917631481030398,0.1242653449555667,6.501037810311571,9.816825376908099,11.36809538664101,13.37370518734296,24.59399297731576,26.58175471788463,-1.545360005431839,-9.070921236162881,-3.541174586941123,22.79380312386476,15.92411276946044,0.1477745651540476,17.91492000633075,14.95026564780594,21.13498426596681,2.8866589644898,-11.50378112512165,3.859706410326294,3.927453711348284,16.35197312143509,19.13984034471135,14.75141696322134,25.17107100784472,23.13388750727866,-10.19058148342196,-9.891642140852655,-1.677721720554227,1.173868373417069,-1.502667393688391,5.801329036802843,12.73469239646596,5.444949703701599,16.37576567345814,-12.43466895273172,2.409849970920767,-0.1266182630274407,8.205170840848215,13.12720057454805,17.92994589442913,14.22774912186629,31.84015942004612,23.62478992915937,-26.92910463644299,0.6052171026497142,-13.39742196645368,1.224060757461197,13.18515618757625,1.417213462988959,17.57414584010865,13.25601760905322,15.69497113030105],[16.4651898931949,13.90453645196253,21.20798302988603,37.47520282723993,30.45689687613099,25.4531193958815,37.93280553729986,36.16925170367148,36.78267593807314,33.19146399619949,35.63113270242452,13.41640995309058,42.97315623430168,20.7897751277971,38.8947347890334,54.22200846880592,40.27084105254362,44.34786138870003,16.04955638423863,14.01387177691462,13.60148256746807,28.60457056776894,26.27714938062458,23.97930837318441,35.2091448700598,45.37847003336616,30.93975398939257,32.23077695118013,26.55921219064707,14.70002562744018,42.39869306181521,25.58847792096851,31.91750256644118,48.82133247249332,43.54856691477852,73.7647431757941,12.72776432816438,12.54466205868328,19.58258868371979,32.53565819790825,32.02750503209838,23.61627470718721,46.22394584606057,37.69434423357048,38.52095203025462,17.36962720808165,27.60127925295854,18.00201658597972,30.71688807656504,32.55946696477969,22.67035403204251,59.71150980476189,44.53975160495822,44.05808863171913,22.72347163442297,16.57843781988308,21.08621069657274,34.61724518174612,23.96492002398008,27.17446134872165,53.62542043734219,44.6030793339802,39.40636547805619,35.90803147307583,28.69404595121809,40.3514506079792,42.24715850972463,41.40903580612507,43.21630179397906,45.12791586901571,49.60900770992485,52.19110015171719,13.43662632672675,17.87103013492767,21.06906533751527,18.88574645567816,24.05691031028384,27.69055309309098,38.26260624228266,38.97288876233581,39.48216233059762,42.04972586248243,26.1723033207993,24.75063886135059,29.78085211565547,30.9041709951512,35.05203793455438,48.75325656823717,41.81969956115923,38.60959130938559,16.77492308227318,13.5907758526327,21.44171628049568,32.68723837487436,25.99449133087663,24.08055039573223,36.06967416121487,38.77167379432593,28.43326318968013,11.64911472687147,25.36739842674011,10.95075923547904,28.12369586472518,29.19577492075708,37.75805156749409,56.81505485489592,57.6741915375941,47.11315731134464,17.98768118350912,17.94026933972452,20.20258755511727,18.60550184299419,27.89551341902078,22.62709562577282,48.93789949773402,43.05791252722282,34.04512868609264,48.63803326220703,28.03918875289801,19.55664808578131,37.2966038617466,25.93078422164707,37.81711379290197,58.22719828829889,49.5439312986301,43.01104476956711,17.91866599391922,24.07759555161602,14.40928065895779,25.6477125866143,25.98291388552207,25.60847968312006,32.49323894252046,41.20270970958206,40.94461945862977,38.85573569524983,22.1899606485361,27.2986535991905,65.2218340958846,47.50260823207461,28.70057984859632,55.52977279609512,43.95349787441965,46.39296952486296,22.46429185124643,3.628855601812589,18.61696240413266,23.90971364288455,34.09683039485526,32.79881158086402,33.90496498201807,41.17682127568516,37.6966541589109,29.31498979348464,24.55229684659973,22.40751121946785,36.89096134498788,32.28360788936326,34.13095909198445,55.94987737991519,39.06637761329908,44.45177142106468,4.295761330181101,17.74905594622967,13.7654116820603,26.99971704007382,27.400633384603,31.45531534839334,35.55645876825193,46.54876937286706,38.7168884500532,14.98606889097356,33.41477706844177,14.81600443744162,44.33444305578635,44.27570541065747,30.43889656294556,54.24559631371623,45.62828341118686,43.25831454674903],["Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test"],["two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.sim_id<\/th>\n      <th>n<\/th>\n      <th>mean_diff<\/th>\n      <th>sd<\/th>\n      <th>rep<\/th>\n      <th>Source<\/th>\n      <th>estimate<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>parameter<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n      <th>method<\/th>\n      <th>alternative<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,7,8,9,10,11,12]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":".sim_id","targets":1},{"name":"n","targets":2},{"name":"mean_diff","targets":3},{"name":"sd","targets":4},{"name":"rep","targets":5},{"name":"Source","targets":6},{"name":"estimate","targets":7},{"name":"statistic","targets":8},{"name":"p.value","targets":9},{"name":"parameter","targets":10},{"name":"conf.low","targets":11},{"name":"conf.high","targets":12},{"name":"method","targets":13},{"name":"alternative","targets":14}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>simpr_tbl <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(n, mean_diff, sd) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Power =</span> <span class="fu">mean</span>(p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(n, Power)) <span class="sc">+</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(sd), <span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(mean_diff)) <span class="sc">+</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'n', 'mean_diff'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="simulator_files/figure-html/simpr-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="philosophy" class="level3">
<h3 class="anchored" data-anchor-id="philosophy">Philosophy</h3>
<p>The <a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a> workflow, inspired by the <a href="https://infer.tidymodels.org">{<strong>infer</strong>}</a> package, distills a simulation study into five primary steps:</p>
<ul>
<li><code>specify()</code> your data-generating process;</li>
<li><code>define()</code> parameters that you want to systematically vary across your simulation design (e.g.&nbsp;n, effect size);</li>
<li><code>generate()</code> the simulation data;</li>
<li><code>fit()</code> models to your data (e.g.&nbsp;<code>lm()</code>);</li>
<li><code>tidy_fits()</code> for consolidating results using <code>broom::tidy()</code>, such as computing power or Type I Error rates.</li>
</ul>
</section>
<section id="reproducible-workflows" class="level3">
<h3 class="anchored" data-anchor-id="reproducible-workflows">Reproducible workflows</h3>
<ul>
<li>Same seed, same results;</li>
<li>Can regenerate just a <em>specific subset</em> to see what happened in that particular dataset or fit;</li>
<li>Useful in debugging and diagnosing unexpected results, etc.</li>
</ul>
<section id="filtering-full-simulation" class="level4">
<h4 class="anchored" data-anchor-id="filtering-full-simulation">Filtering full simulation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>withr<span class="sc">::</span><span class="fu">with_seed</span>(<span class="dv">500</span>, {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">specify</span>(<span class="at">a =</span> <span class="sc">~</span> <span class="fu">runif</span>(<span class="dv">6</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">generate</span>(<span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(.sim_id <span class="sc">==</span> <span class="dv">3</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>full tibble
--------------------------
# A tibble: 1 × 3
  .sim_id   rep sim             
    &lt;int&gt; &lt;int&gt; &lt;list&gt;          
1       3     3 &lt;tibble [6 × 1]&gt;

sim[[1]]
--------------------------
# A tibble: 6 × 1
      a
  &lt;dbl&gt;
1 0.371
2 0.959
3 0.633
4 0.177
5 0.803
6 0.133</code></pre>
</div>
</div>
</section>
<section id="simulate-subset-only" class="level4">
<h4 class="anchored" data-anchor-id="simulate-subset-only">Simulate subset only</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>withr<span class="sc">::</span><span class="fu">with_seed</span>(<span class="dv">500</span>, {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">specify</span>(<span class="at">a =</span> <span class="sc">~</span> <span class="fu">runif</span>(<span class="dv">6</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">generate</span>(<span class="dv">3</span>, .sim_id <span class="sc">==</span> <span class="dv">3</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>full tibble
--------------------------
# A tibble: 1 × 3
  .sim_id   rep sim             
    &lt;int&gt; &lt;int&gt; &lt;list&gt;          
1       3     3 &lt;tibble [6 × 1]&gt;

sim[[1]]
--------------------------
# A tibble: 6 × 1
      a
  &lt;dbl&gt;
1 0.371
2 0.959
3 0.633
4 0.177
5 0.803
6 0.133</code></pre>
</div>
</div>
</section>
<section id="benchmarking" class="level4">
<h4 class="anchored" data-anchor-id="benchmarking">Benchmarking</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">all =</span> <span class="fu">specify</span>(<span class="at">a =</span> <span class="sc">~</span> <span class="fu">runif</span>(<span class="dv">6</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">generate</span>(<span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(.sim_id <span class="sc">==</span> <span class="dv">1000</span>),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">subset =</span> <span class="fu">specify</span>(<span class="at">a =</span> <span class="sc">~</span> <span class="fu">runif</span>(<span class="dv">6</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">generate</span>(<span class="dv">1000</span>, .sim_id <span class="sc">==</span> <span class="dv">1000</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span>, <span class="at">min_iterations =</span> <span class="dv">10</span>L, <span class="at">relative =</span> <span class="cn">TRUE</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Some expressions had a GC in every iteration; so filtering is
disabled.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  expression   min median `itr/sec` mem_alloc `gc/sec`
  &lt;bch:expr&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 all         65.2   64.1       1        1        1   
2 subset       1      1        64.0      1.29     1.26</code></pre>
</div>
</div>
</section>
</section>
<section id="other-features" class="level3">
<h3 class="anchored" data-anchor-id="other-features">Other features</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Data munging
</div>
</div>
<div class="callout-body-container callout-body">
<p>Add <code>per_sim() |&gt;</code> after <code>generate()</code> in your simulation pipeline and then any tidyverse function that will apply to every simulation dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">specify</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">pre  =</span> <span class="sc">~</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, sd), </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">post =</span> <span class="sc">~</span> pre <span class="sc">+</span> <span class="fu">rnorm</span>(n, mean_diff, sd)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">define</span>(<span class="at">n =</span> ns, <span class="at">mean_diff =</span> mean_diffs, <span class="at">sd =</span> sds) <span class="sc">|&gt;</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate</span>(reps, <span class="at">.progress =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Apply tidyverse functions to every simulation dataset</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">per_sim</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Mutate to add a range restriction</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(dplyr<span class="sc">::</span><span class="fu">everything</span>(), dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    pre <span class="sc">&gt;</span>  <span class="dv">100</span> <span class="sc">~</span> <span class="dv">100</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    pre <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">100</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">100</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    .default   <span class="sc">~</span> pre</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  ))) <span class="sc">|&gt;</span> </span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">t =</span> <span class="sc">~</span> <span class="fu">t.test</span>(post, pre, <span class="at">paired =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy_fits</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Error handling
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Can change error handling to keep going with simulation, stop simulation, or to skip warnings;</li>
<li>Debug and recovery options to enter into simulation during error.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Built-in parallelization
</div>
</div>
<div class="callout-body-container callout-body">
<p>Just add</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">6</span>) <span class="co"># or however many cores are reasonable to use</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and your simulation pipeline (actually the <code>generate()</code> function) will run in parallel.</p>
</div>
</div>
</section>
<section id="pros-cons" class="level3">
<h3 class="anchored" data-anchor-id="pros-cons">Pros &amp; cons</h3>
<div class="columns">
<div class="column">
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pros
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>tidyverse friendly;</li>
<li>beginner friendly;</li>
<li>Reproducibility, error handling built in;</li>
<li>General-purpose, customizable and can handle arbitrary R code.</li>
</ul>
</div>
</div>
</div><div class="column">
<div class="callout callout-style-default callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cons
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Likely not as fast/optimized as some alternatives;</li>
<li>Not as customizable/powerful as <strong>DeclareDesign</strong>;</li>
<li>Not specifically set up for any particular application (no MC errors, plots, reports, specific models…).</li>
</ul>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="simulator" class="level2">
<h2 class="anchored" data-anchor-id="simulator"><a href="https://jacobbien.github.io/simulator/">{<strong>simulator</strong>}</a></h2>
<p>This is a package on the CRAN. It is described in a 2016 paper by Jacob Bien. Last update on GitHub : last year (so, 2023).</p>
<section id="getting-started" class="level3">
<h3 class="anchored" data-anchor-id="getting-started">Getting started</h3>
<p>The function <code>create()</code>, with a directory that does not exist, will create the directory with 5 files and 1 folder:</p>
<ul>
<li><code>eval_functions.R</code>: contains metrics to be evaluated;</li>
<li><code>files/</code>: directory to store results;</li>
<li><code>main.R</code>: main code to run;</li>
<li><code>method_functions.R</code>: methods to run;</li>
<li><code>model_functions.R</code>: define the models;</li>
<li><code>writeup.Rmd</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>simulator_dir <span class="ot">&lt;-</span> <span class="st">"./sims_simulator"</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(simulator_dir))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">create</span>(simulator_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>New simulation template created!  Go to ./sims_simulator/main.R to get started.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>withr<span class="sc">::</span><span class="fu">with_dir</span>(simulator_dir, {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list.files</span>()</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "eval_functions.R"   "main.R"             "method_functions.R"
[4] "model_functions.R"  "writeup.Rmd"       </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>On a typical project, one starts by defining a model in <code>model_functions.R</code>, one or two methods in <code>method_functions.R</code>, and a few metrics in <code>eval_functions.R</code>, and then one runs the code in <code>main.R</code>. After looking at some of the results, one might add an additional model or method or metric. One then returns to <code>main.R</code>, adds some additional lines specifying that the additional components should be run as well and looks at some more results.</p>
<p>The simplest way to look at results is by using the plot functions <code>plot_eval()</code>, <code>plot_evals()</code> and <code>plot_evals_by()</code>. In situations where you wish to investigate results more deeply than just looking at aggregated plots, one can use the functions <code>model()</code>, <code>draws()</code>, <code>output()</code>, and <code>evals()</code> to get at all objects generated through the course of the simulation.</p>
</blockquote>
<p>The <code>create()</code> function also creates the template in the different files:</p>
<section id="content-of-model_functions.r" class="level4">
<h4 class="anchored" data-anchor-id="content-of-model_functions.r">Content of <code>model_functions.R</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>make_my_model <span class="ot">&lt;-</span> <span class="cf">function</span>(n, prob) {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">new_model</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"contaminated-normal"</span>, </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">"Contaminated normal (n = %s, prob = %s)"</span>, n, prob), </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">params =</span> <span class="fu">list</span>(<span class="at">n =</span> n, <span class="at">mu =</span> <span class="dv">2</span>, <span class="at">prob =</span> prob), </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">simulate =</span> <span class="cf">function</span>(n, mu, prob, nsim) {</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>      <span class="co"># this function must return a list of length nsim</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>      contam <span class="ot">&lt;-</span> <span class="fu">runif</span>(n <span class="sc">*</span> nsim) <span class="sc">&lt;</span> prob</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>      x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="cn">NA</span>, n <span class="sc">*</span> nsim), n, nsim)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>      x[contam] <span class="ot">&lt;-</span> <span class="fu">rexp</span>(<span class="fu">sum</span>(contam))</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>      x[<span class="sc">!</span>contam] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="fu">sum</span>(<span class="sc">!</span>contam))</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>      x <span class="ot">&lt;-</span> mu <span class="sc">+</span> x <span class="co"># true mean is mu</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="fu">split</span>(x, <span class="fu">col</span>(x))) <span class="co"># make each col its own list element</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Define a model from its different components with <code>new_model()</code>:</p>
<ul>
<li><code>name</code>;</li>
<li><code>label</code>: what will be printed in the tables later probably?</li>
<li><code>param</code>: a list of different parameters for the model;</li>
<li><code>simulate</code>: a function of the parameters that returns <code>nsim</code> simulations.</li>
</ul>
</section>
<section id="content-of-method_functions.r" class="level4">
<h4 class="anchored" data-anchor-id="content-of-method_functions.r">Content of <code>method_functions.R</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>my_method <span class="ot">&lt;-</span> <span class="fu">new_method</span>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"my-method"</span>, </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="st">"My Method"</span>, </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="cf">function</span>(model, draw) {</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">fit =</span> <span class="fu">median</span>(draw))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>their_method <span class="ot">&lt;-</span> <span class="fu">new_method</span>(</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"their-method"</span>, </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="st">"Their Method"</span>,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="cf">function</span>(model, draw) {</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">fit =</span> <span class="fu">mean</span>(draw))</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Define methods to be used on the model. The function <code>new_method()</code> has for arguments a name (for R) <code>name</code>, a pretty name <code>label</code>, and the <code>method</code> named arg for the computation we want.</p>
</section>
<section id="content-of-eval_functions.r" class="level4">
<h4 class="anchored" data-anchor-id="content-of-eval_functions.r">Content of <code>eval_functions.R</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>his_loss <span class="ot">&lt;-</span> <span class="fu">new_metric</span>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"hisloss"</span>, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="st">"His loss function"</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="cf">function</span>(model, out) {</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>((model<span class="sc">$</span>mu <span class="sc">-</span> out<span class="sc">$</span>fit)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>her_loss <span class="ot">&lt;-</span> <span class="fu">new_metric</span>(</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"herloss"</span>, </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="st">"Her loss function"</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="cf">function</span>(model, out) {</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">abs</span>(model<span class="sc">$</span>mu <span class="sc">-</span> out<span class="sc">$</span>fit))</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Metric objects: shows how to compare model object and output of the method (method used on sim) object.</p>
</section>
<section id="content-of-main.r" class="level4">
<h4 class="anchored" data-anchor-id="content-of-main.r">Content of <code>main.R</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(simulator_dir)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"model_functions.R"</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"method_functions.R"</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"eval_functions.R"</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="do">## @knitr init</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>name_of_simulation <span class="ot">&lt;-</span> <span class="st">"normal-mean-estimation-with-contamination"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="do">## @knitr main</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> <span class="fu">new_simulation</span>(</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> name_of_simulation,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="st">"Mean estimation under contaminated normal"</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_model</span>(</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">make_model =</span> make_my_model, </span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">123</span>,</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="dv">50</span>,</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">prob =</span> <span class="fu">as.list</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">6</span>)),</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">vary_along =</span> <span class="st">"prob"</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">simulate_from_model</span>(<span class="at">nsim =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">run_method</span>(<span class="fu">list</span>(my_method, their_method)) <span class="sc">%&gt;%</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">evaluate</span>(<span class="fu">list</span>(his_loss, her_loss))</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="do">## @knitr plots</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_eval_by</span>(<span class="at">sim =</span> sim, <span class="at">metric_name =</span> <span class="st">"hisloss"</span>, <span class="at">varying =</span> <span class="st">"prob"</span>)</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a><span class="do">## @knitr tables</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="fu">tabulate_eval</span>(</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">object =</span> sim, </span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric_name =</span> <span class="st">"herloss"</span>, </span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_type =</span> <span class="st">"markdown"</span>,</span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">format_args =</span> <span class="fu">list</span>(<span class="at">digits =</span> <span class="dv">1</span>)</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>main.R</code> script calls the different files.</p>
<p>Can <code>plot_eval_by()</code> be used for different metrics at once? Can <code>tabulate_eval()</code> be used for different metrics at once?</p>
</section>
</section>
<section id="example-power-curve" class="level3">
<h3 class="anchored" data-anchor-id="example-power-curve">Example: power curve</h3>
<p>Here is the content of the <code>main.R</code> file in the folder <code>simulator_equality_test/</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(simulator) <span class="co"># this file was created under simulator version 0.2.5</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"simulator_equality_test/model_functions.R"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"simulator_equality_test/method_functions.R"</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"simulator_equality_test/eval_functions.R"</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="do">## @knitr init</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>name_of_simulation <span class="ot">&lt;-</span> <span class="st">"normal-mean-test"</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="do">## @knitr main</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">file</span>()</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span>(<span class="at">file =</span> f)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> <span class="fu">new_simulation</span>(</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> name_of_simulation, </span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="st">"Test of mean"</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_model</span>(</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">make_model =</span> make_my_model_normal, </span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">13</span>, </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="dv">20</span>, </span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">mu2 =</span> <span class="fu">as.list</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="at">by =</span> <span class="fl">0.5</span>)), </span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">mu1 =</span> <span class="dv">0</span>, </span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">sig =</span> <span class="dv">5</span>, </span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">vary_along =</span> <span class="st">"mu2"</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">simulate_from_model</span>(<span class="at">nsim =</span> <span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">run_method</span>(<span class="fu">list</span>(t_test)) <span class="sc">|&gt;</span> </span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">evaluate</span>(<span class="fu">list</span>(pval_loss))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>..Created model and saved in normal/mu1_0/mu2_0/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_0.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_1/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_1.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_2/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_2.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_3/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_3.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_4/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_4.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_5.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_6/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_6.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_7/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_7.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_8/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_8.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_9/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_9.5/n_20/sig_5/model.Rdata
..Created model and saved in normal/mu1_0/mu2_10/n_20/sig_5/model.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_0/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_0.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_1/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_1.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_2/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_2.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_3/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0 sec and saved in normal/mu1_0/mu2_3.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_4/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_4.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_5.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_6/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_6.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_7/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_7.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_8/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0 sec and saved in normal/mu1_0/mu2_8.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_9/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_9.5/n_20/sig_5/r1.Rdata
..Simulated 1000 draws in 0.01 sec and saved in normal/mu1_0/mu2_10/n_20/sig_5/r1.Rdata
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Performed Mean equality test in 0 seconds (on average over 1000 sims)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)
..Evaluated Mean equality test in terms of pval&lt;0.05, Computing time (sec)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span>()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(f)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(f)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="do">## @knitr tables</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tabulate_eval</span>(</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  sim, </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric_name =</span> <span class="st">"p_value"</span>, </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_type =</span> <span class="st">"markdown"</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">format_args =</span> <span class="fu">list</span>(<span class="at">digits =</span> <span class="dv">5</span>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;!-- generated by simulator on Tue Sep  3 10:04:05 2024. --&gt;</code></pre>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>A comparison of Mean pval&lt;0.05 (averaged over 1000 replicates).</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Mean equality test</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.055 (0.0072130)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.067 (0.0079103)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.100 (0.0094916)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.143 (0.0110758)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.226 (0.0132325)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.327 (0.0148422)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.441 (0.0157088)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.559 (0.0157088)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.671 (0.0148654)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.783 (0.0130415)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.860 (0.0109782)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.907 (0.0091889)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.955 (0.0065588)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.982 (0.0042064)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.992 (0.0028185)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.995 (0.0022316)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.999 (0.0010000)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.999 (0.0010000)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">0.999 (0.0010000)</td>
</tr>
<tr class="even">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">1.000 (0.0000000)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">normal</td>
<td style="text-align: left;">1.000 (0.0000000)</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## @knitr plots</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_eval_by</span>(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  sim, </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric_name =</span> <span class="st">"p_value"</span>, </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">varying =</span> <span class="st">"mu2"</span>, </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Power curve with mu1=0 and varying mu2"</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="simulator_files/figure-html/simulator-power-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>ToDo :</p>
<ul>
<li>vary <code>n</code></li>
<li>vary both <code>n</code> and <code>mu2</code></li>
</ul>
</section>
<section id="important-functions" class="level3">
<h3 class="anchored" data-anchor-id="important-functions">Important functions</h3>
<ul>
<li><code>new_model()</code>;</li>
<li><code>new_method()</code>;</li>
<li><code>new_metric()</code>;</li>
<li><code>new_simulation()</code>;</li>
<li><code>generate_model()</code>;</li>
<li><code>simulate_from_model()</code>;</li>
<li><code>run_method()</code>;</li>
<li><code>evaluate()</code>;</li>
<li><code>plot_eval()</code>, <code>plot_eval_by()</code>, <code>tabulate_eval()</code>.</li>
</ul>
</section>
</section>
<section id="pros-cons-1" class="level2">
<h2 class="anchored" data-anchor-id="pros-cons-1">Pros &amp; cons</h2>
<p>This is not really a package that codes a method, but instead it proposes an architecture to store your codes, output simulations, results, etc.</p>
<div class="columns">
<div class="column">
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pros
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>any model possible, if you can write it;</li>
<li>possible to iterate over parameter with pretty pipes;</li>
<li>parallel possible, because you choose what you use;</li>
<li>stores all results in the storage with increasing depth:</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>files</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>└── name_of_model</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    └── name_of_first_param_value</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>        └── name_of2nd_param_value ... model.Rdata out stores all sims</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>            └── r?.Rdata</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div><div class="column">
<div class="callout callout-style-default callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cons
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Not an usual way to code in R, and not easy to explain. Create the directory with the <code>create()</code> function. Then, add the different functions, methods, models, etc., in the corresponding files;</li>
<li>Mixes the code of the package/template with your own code;</li>
<li>Stores all results in this neat way BUT if too many parameters, may exceed the depth allowed.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="simengine" class="level2">
<h2 class="anchored" data-anchor-id="simengine"><a href="https://cran.r-project.org/web/packages/SimEngine/vignettes/SimEngine.html">{<strong>simEngine</strong>}</a></h2>
<p><a href="https://cran.r-project.org/web/packages/SimEngine/vignettes/SimEngine.html">{<strong>simEngine</strong>}</a> is an open-source R package for structuring, maintaining, running, and debugging statistical simulations on both local and cluster-based computing environments. The paper describing the package is available <a href="https://arxiv.org/pdf/2403.05698">here</a>.</p>
<section id="example" class="level3">
<h3 class="anchored" data-anchor-id="example">Example</h3>
<ol type="1">
<li>Create a simulation object <code>SimEngine::new_sim()</code></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> <span class="fu">new_sim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Create functions to generate data</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>create_data <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rpois</span>(<span class="at">n =</span> n, <span class="at">lambda =</span> <span class="dv">20</span>))</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>est_lambda <span class="ot">&lt;-</span> <span class="cf">function</span>(dat, type) {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (type<span class="sc">==</span><span class="st">"M"</span>) {</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">mean</span>(dat))</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (type<span class="sc">==</span><span class="st">"V"</span>) {</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">var</span>(dat))</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Simulation set-up</li>
</ol>
<p>One run = one simulation replicate. Features varying across simulation = simulation levels. Possible values = level values. By default, <a href="https://cran.r-project.org/web/packages/SimEngine/vignettes/SimEngine.html">{<strong>simEngine</strong>}</a> runs one simulation replicate for each combination of level value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> sim <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_levels</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimator =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"V"</span>),</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>sim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>SimEngine: simulation object (class "sim_obj")
----------------------------------------------
Configuration: 
    num_sim: 1
    parallel: FALSE
    n_cores: NA
    packages: NULL
    stop_at_error: FALSE
    seed: 528361534
    progress_bar: TRUE
    batch_levels: NA
    return_batch_id: FALSE
Levels: 
    estimator: c("M", "V")
    n: c(10, 100, 1000)
State: pre run</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Create a simulation script</li>
</ol>
<p>i.e.&nbsp;generation, analysis and return results</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> sim <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_script</span>(<span class="cf">function</span>() {</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    dat <span class="ot">&lt;-</span> <span class="fu">create_data</span>(<span class="at">n =</span> L<span class="sc">$</span>n)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    lambda_hat <span class="ot">&lt;-</span> <span class="fu">est_lambda</span>(<span class="at">dat =</span> dat, <span class="at">type =</span> L<span class="sc">$</span>estimator)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"lambda_hat"</span> <span class="ot">=</span> lambda_hat))</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li>Configure and run the simulation</li>
</ol>
<p>Using the <code>SimEngine::set_config()</code> it is possible to specify the number of replicates <code>num_sim</code>, the parallelization type <code>n_cores</code>, <code>parallel</code>, … and the required packages <code>packages</code> argument.</p>
<p>And we run the simulation with the <code>SimEngine::run()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Configuration</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> sim <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_config</span>(</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_sim =</span> <span class="dv">100</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">packages =</span> <span class="fu">c</span>(<span class="st">"ggplot2"</span>, <span class="st">"stringr"</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="do">### Run</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> <span class="fu">run</span>(sim)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Done. No errors or warnings detected.</code></pre>
</div>
</div>
<p>The package implements a <code>SimEngine::summarize()</code> function to calculate usual summary statistics such as bias, variance, MSE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>sim <span class="sc">|&gt;</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">stat =</span> <span class="st">"bias"</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"bias_lambda"</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">estimate =</span> <span class="st">"lambda_hat"</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">truth =</span> <span class="dv">20</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">stat =</span> <span class="st">"mse"</span>,</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"mse_lambda"</span>,</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">estimate =</span> <span class="st">"lambda_hat"</span>,</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">truth =</span> <span class="dv">20</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  level_id estimator    n n_reps bias_lambda  mse_lambda
1        1         M   10    100  -0.0930000  1.75850000
2        2         V   10    100   0.3353333 96.23611111
3        3         M  100    100  -0.0877000  0.20287100
4        4         V  100    100  -0.3656687  9.04930168
5        5         M 1000    100   0.0198000  0.02163858
6        6         V 1000    100   0.1130303  0.75417061</code></pre>
</div>
</div>
<p>We can have information on individual simulation including runtime.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sim<span class="sc">$</span>results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sim_uid level_id rep_id estimator  n      runtime lambda_hat
1       1        1      1         M 10 0.0007805824       20.3
2       7        1      2         M 10 0.0005302429       20.4
3       8        1      3         M 10 0.0005452633       19.8
4       9        1      4         M 10 0.0005369186       19.1
5      10        1      5         M 10 0.0005323887       19.8
6      11        1      6         M 10 0.0006158352       20.9</code></pre>
</div>
</div>
<p>It is possible to update simulation with more replicates or a new level. It keeps the old simulations and run only needed ones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> sim <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_config</span>(<span class="at">num_sim =</span> <span class="dv">200</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_levels</span>(</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimator =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"V"</span>),</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>, <span class="dv">10000</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_sim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Done. No errors or warnings detected.</code></pre>
</div>
</div>
</section>
<section id="parallelization" class="level3">
<h3 class="anchored" data-anchor-id="parallelization">Parallelization</h3>
<p><a href="https://avi-kenny.github.io/SimEngine/articles/parallelization.html">A specific vignette</a> is available and the introduction precises the terminology for parallel computing (node, core, task, job, etc.). There are two modes of parallelizing code: <code>local</code> or <code>cluster</code>. The first thing is to specify <code>set_config(parallel = TRUE)</code>.</p>
<ul>
<li><strong>Local</strong>: split calculations on several cores of a single computer. If the user’s computer has <span class="math inline">\(n\)</span> cores available, <a href="https://cran.r-project.org/web/packages/SimEngine/vignettes/SimEngine.html">{<strong>simEngine</strong>}</a> will use <span class="math inline">\(n-1\)</span> cores by default.</li>
<li><strong>Cluster</strong>: function <code>run_on_cluster()</code>. To use the function, the user needs to break the code into three blocks : <code>first</code> (code run only once, set-up simulation object), <code>main</code> (a single call to <code>run()</code>) and <code>last</code> (the code will run after all simulation replicates have finished running and after SimEngine has automatically compiled the results into the simulation object.).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run_on_cluster</span>(</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">first =</span> {</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    create_data <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="fu">rpois</span>(<span class="at">n =</span> n, <span class="at">lambda =</span> <span class="dv">20</span>))</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    est_lambda <span class="ot">&lt;-</span> <span class="cf">function</span>(dat, type) {</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">"M"</span>) {</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(<span class="fu">mean</span>(dat))</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">"V"</span>) {</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(<span class="fu">var</span>(dat))</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    sim <span class="ot">&lt;-</span> <span class="fu">new_sim</span>() <span class="sc">|&gt;</span> </span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">set_levels</span>(<span class="at">estimator =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"V"</span>), <span class="at">n =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">set_script</span>(<span class="cf">function</span>() {</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>        dat <span class="ot">&lt;-</span> <span class="fu">create_data</span>(L<span class="sc">$</span>n)</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>        lambda_hat <span class="ot">&lt;-</span> <span class="fu">est_lambda</span>(<span class="at">dat =</span> dat, <span class="at">type =</span> L<span class="sc">$</span>estimator)</span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"lambda_hat"</span> <span class="ot">=</span> lambda_hat))</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>      }) <span class="sc">|&gt;</span> </span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">set_config</span>(<span class="at">num_sim =</span> <span class="dv">100</span>, <span class="at">n_cores =</span> <span class="dv">20</span>)</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> {</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    sim <span class="ot">&lt;-</span> <span class="fu">run</span>(sim)</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">last =</span> {</span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>    sim <span class="ot">&lt;-</span> <span class="fu">summarize</span>(sim)</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">cluster_config =</span> <span class="fu">list</span>(<span class="at">js =</span> <span class="st">"slurm"</span>)</span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>)        </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Done. No errors or warnings detected.</code></pre>
</div>
</div>
<p>The <code>cluster_config</code> argument enables to specify options such as the choice of the scheduler.</p>
<p>Example on how to give instruction to the job scheduler is on the vignette.</p>
<p>Be caution: the number of cores cannot exceed the total number of simulation replicates.</p>
<p>Function to update simulation on a CSS: <code>update_sim_on_cluster()</code>. Difference is we do not need to create a new simulation config but load the existing simulation using <code>readRDS()</code> and use <code>set_config()</code> or <code>set_levels()</code> and <code>update_sim()</code> in the main block.</p>
<p>There is a vignette on advanced functionality such as complex results or simulation levels. It exists the <code>batch()</code> function to share data or objects between simulation replicates.</p>
</section>
</section>
<section id="pros-cons-2" class="level2">
<h2 class="anchored" data-anchor-id="pros-cons-2">Pros &amp; cons</h2>
<div class="columns">
<div class="column">
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pros
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>beginner friendly;</li>
<li>local and cluster-based computing environments;</li>
<li>well-written documentations and website with vignettes (with stat. formula of terminology for parallel computing);</li>
<li>information-sharing across simulation replicates (not tested);</li>
<li>automatic calculation of Monte Carlo error (not tested).</li>
</ul>
</div>
</div>
</div><div class="column">
<div class="callout callout-style-default callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cons
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<section id="simulation-based-power-calculation" class="level3">
<h3 class="anchored" data-anchor-id="simulation-based-power-calculation">Simulation-based power calculation</h3>
<p>A [specific vignette] is available on <a href="https://avi-kenny.github.io/SimEngine/articles/example_1.html">the author’s website</a>.</p>
</section>
</section>
<section id="simchef" class="level2">
<h2 class="anchored" data-anchor-id="simchef"><a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a></h2>
<p>This document describes a simulation experiment using the <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a> package in R, including data generation, method application, evaluation, and visualization.</p>
<p>A <a href="https://yu-group.github.io/simChef/articles/simChef.html">specific vignette</a> is available on the author’s website for more detailed instructions and examples on using the <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a> package.</p>
<section id="setup" class="level3">
<h3 class="anchored" data-anchor-id="setup">Setup</h3>
<p>The <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a> package is not on CRAN and must therefore be installed from GitHub using the <a href="https://remotes.r-lib.org">{<strong>remotes</strong>}</a> package as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"Yu-Group/simChef"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a>, a simulation experiment is divided into four components:</p>
<ul>
<li><code>DGP()</code>: the data-generating processes (DGPs) from which to generate data;</li>
<li><code>Method()</code>: the methods (or models) to fit on the data in the experiment;</li>
<li><code>Evaluator()</code>: the evaluation metrics used to evaluate the methods’ performance;</li>
<li><code>Visualizer()</code>: the visualization procedures used to visualize outputs from the method fits or evaluation results (can be tables, plots, or even R Markdown snippets to display).</li>
</ul>
</section>
<section id="step-1-define-the-data-generating-process-methods-and-evaluation-functions" class="level3">
<h3 class="anchored" data-anchor-id="step-1-define-the-data-generating-process-methods-and-evaluation-functions">Step 1: Define the Data-Generating Process, Methods, and Evaluation Functions</h3>
<section id="data-generating-process" class="level4">
<h4 class="anchored" data-anchor-id="data-generating-process">Data-Generating Process</h4>
<p>The following function generates pre- and post-treatment data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>dgp_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(n, sd, mean_diff) {</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  pre  <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, sd)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  post <span class="ot">&lt;-</span> pre <span class="sc">+</span> <span class="fu">rnorm</span>(n, mean_diff, sd)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">pre =</span> pre, <span class="at">post =</span> post)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="method" class="level4">
<h4 class="anchored" data-anchor-id="method">Method</h4>
<p>The following function applies a paired t-test to the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>method_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(pre, post) {</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t.test</span>(post, pre, <span class="at">paired =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="evaluation" class="level4">
<h4 class="anchored" data-anchor-id="evaluation">Evaluation</h4>
<p>The following function evaluates the power of the test:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>evaluation_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(fit_results) {</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  Power <span class="ot">&lt;-</span> fit_results <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(n, mean_diff, sd) <span class="sc">|&gt;</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Power =</span> <span class="fu">mean</span>(p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>))</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualization" class="level4">
<h4 class="anchored" data-anchor-id="visualization">Visualization</h4>
<p>The following function creates a plot to visualize the power:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>power_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(fit_results, eval_results) {</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  fit_results <span class="sc">|&gt;</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(n, mean_diff, sd) <span class="sc">|&gt;</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Power =</span> <span class="fu">mean</span>(p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(n, Power)) <span class="sc">+</span> </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">rows =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(sd), <span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(mean_diff)) <span class="sc">+</span> </span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="step-2-convert-functions-into-simchef-class-objects" class="level3">
<h3 class="anchored" data-anchor-id="step-2-convert-functions-into-simchef-class-objects">Step 2: Convert Functions into <a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a> Class Objects</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>dgp <span class="ot">&lt;-</span> <span class="fu">create_dgp</span>(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">.dgp_fun =</span> dgp_fun, <span class="at">.name =</span> <span class="st">"DGP"</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>method <span class="ot">&lt;-</span> <span class="fu">create_method</span>(</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">.method_fun =</span> method_fun, <span class="at">.name =</span> <span class="st">"T-test"</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>evaluation <span class="ot">&lt;-</span> <span class="fu">create_evaluator</span>(</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">.eval_fun =</span> evaluation_fun , <span class="at">.name =</span> <span class="st">'P.value'</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>power_plot <span class="ot">&lt;-</span> <span class="fu">create_visualizer</span>(</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">.viz_fun =</span> power_plot_fun, <span class="at">.name =</span> <span class="st">'Power plot'</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-3-assemble-the-simulation-experiment" class="level3">
<h3 class="anchored" data-anchor-id="step-3-assemble-the-simulation-experiment">Step 3: Assemble the Simulation Experiment</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>experiment <span class="ot">&lt;-</span> <span class="fu">create_experiment</span>(<span class="at">name =</span> <span class="st">"Example Experiment"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_dgp</span>(dgp) <span class="sc">|&gt;</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_method</span>(method) <span class="sc">|&gt;</span> </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_evaluator</span>(evaluation) <span class="sc">|&gt;</span> </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_visualizer</span>(power_plot)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Define the grid of simulation parameters</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>experiment <span class="ot">&lt;-</span> experiment <span class="sc">|&gt;</span> </span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_vary_across</span>(<span class="at">.dgp =</span> <span class="st">"DGP"</span>, <span class="at">n =</span> ns, <span class="at">mean_diff =</span> mean_diffs, <span class="at">sd =</span> sds)</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(experiment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Experiment Name: Example Experiment 
   Saved results at: results/Example Experiment 
   DGPs: DGP 
   Methods: T-test 
   Evaluators: P.value 
   Visualizers: Power plot 
   Vary Across: 
      DGP: DGP 
         n:  int [1:3] 100 150 200
         mean_diff:  num [1:3] 10 20 30
         sd:  num [1:2] 50 100</code></pre>
</div>
</div>
</section>
<section id="step-4-run-the-experiment" class="level3">
<h3 class="anchored" data-anchor-id="step-4-run-the-experiment">Step 4: Run the Experiment</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">run_experiment</span>(experiment, <span class="at">n_reps =</span> reps, <span class="at">save =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Fitting Example Experiment...
Saving fit results...
Fit results saved | time taken: 0.015812 seconds
10 reps completed (totals: 10/10) | time taken: 0.782887 minutes
==============================
Evaluating Example Experiment...
`summarise()` has grouped output by 'n', 'mean_diff'. You can override using the `.groups` argument.
Evaluation completed | time taken: 0.000172 minutes
Saving eval results...
Eval results saved | time taken: 0.053692 seconds
==============================
Visualizing Example Experiment...
`summarise()` has grouped output by 'n', 'mean_diff'. You can override using the `.groups` argument.
Visualization completed | time taken: 0.000309 minutes
Saving viz results...
Viz results saved | time taken: 0.072732 seconds
==============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(results<span class="sc">$</span>fit_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-d1cae3bd23251e60080e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d1cae3bd23251e60080e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","8","8","8","8","8","8","8","8","8","8","8","8","8","8","8","8","8","8","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10"],["DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP","DGP"],["T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test","T-test"],[100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200,100,100,100,100,100,100,150,150,150,150,150,150,200,200,200,200,200,200],[10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30,10,10,20,20,30,30],[50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100,50,100],[2.934367129772865,2.257303413246421,3.824117204344374,1.490561897324016,6.512128887573482,3.016353986025644,3.963775870392314,1.634039925710051,6.05559928624212,0.8218650440398053,6.921038004004761,4.179917749152001,2.519026062170913,1.600000900488519,6.473690192457655,2.77429235401678,7.789959824291968,5.923861762918295,4.015389431429063,-0.4053731585773178,3.493028135766769,1.893905042554103,5.268100608953863,2.861649382163436,3.384490871478179,0.3323447559817269,4.823119812056958,1.738374010707523,8.107982515166077,4.069099454060343,2.543784469812258,0.03171589847810279,5.288823430755547,2.624870596367409,7.272312845974828,3.352709368774208,2.201176008185089,1.291536237406015,4.041225650854257,3.21947244274612,5.369966053944853,3.326283114766786,3.574645778338149,1.251924908997331,5.369971433684883,2.281621600526059,7.334459610247344,2.339977148604167,2.236502960060057,0.6951775639120359,6.335978425807355,2.362516127589114,9.683781250754922,5.132084556282932,1.956263481111504,2.110086689150001,3.985664712561121,4.016703581270372,7.133579686500199,1.934396314279923,1.530315808862172,1.123040759960401,6.861203546869884,4.219010293849986,8.622861890733226,5.464876020633513,2.638738514765311,1.171979450299712,5.426416296021218,2.298427788567354,10.23382584347517,3.053301113331928,1.255690032209996,1.549155432929741,3.516331725734783,0.9305698588584099,5.05435148813718,1.881363884498336,1.060721828256007,1.911504932154599,3.899658286090511,1.49877985495159,7.255199521165178,4.148967882186445,1.754858640613287,3.146542365038123,3.363289358469132,2.071679415435471,9.85113202629134,4.937395570067123,0.9809412092422281,1.560586208309351,2.843052566773873,3.202963280718634,4.79168081288948,1.641367713753905,1.743025637593101,-0.1279837944538428,4.646469009341505,2.576731644731501,7.725426931898418,2.759178951688717,1.740348606447298,1.330138952193957,3.974601417185308,2.484642998228665,6.798521507334648,4.137538875106801,1.65868274860334,-0.2466558194001022,2.728863011274586,4.02976296389506,4.662859305922332,1.11781146524024,1.659049163507221,0.9253346305936624,4.996866506856142,3.705529829249757,6.795129663975348,3.491437179501891,2.578004852950814,1.155057796199701,4.555606331172765,3.484764277329418,7.91392666817035,5.183756883670617,2.301840053783278,0.540048842039301,5.846481959956515,2.497859163441112,4.909662146131479,2.316360028687697,1.405898055078475,1.111059891050266,4.182873934583136,2.086901987925274,7.59411801811249,3.683539881586836,0.6211410226805453,2.57595459049808,4.15754806209368,4.115258259556112,10.34061355630269,4.819791041146333,0.1131019480448294,1.603326122916428,2.951748388473409,2.717462227743181,6.106212603374845,3.906608719416716,0.8922955900418661,-0.5980140201648609,4.778591264208381,2.705478435905566,8.464811042952784,4.825794056787677,1.855818925156846,0.7959331594439073,6.654935116443002,2.197435969394703,8.223222354447135,3.464976390550483,5.014638551113068,-0.2297899818952817,4.424888630642043,1.40061004151525,7.048152386892329,4.207962479048224,1.641982988774672,1.780413194551369,6.812848336144818,2.694518855496395,7.204029933936509,3.587000889146961,3.77200653722747,2.429198329116867,4.816314724526522,0.1044781679573718,8.257866647780819,5.766237129368391],[99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199,99,99,99,99,99,99,149,149,149,149,149,149,199,199,199,199,199,199],[0.004154218999276316,0.026185954004981,0.0002296234420048109,0.13925588195624,3.09400641422992e-09,0.003251374496485936,0.0001141154764048167,0.1043616243287332,1.088687684592364e-08,0.412466893450697,1.241605107715219e-10,4.952644877765622e-05,0.01255477098610972,0.1111847614622828,7.304450115283728e-10,0.00605891758597241,3.626658714352052e-13,1.362860606492778e-08,0.0001155934116848273,0.6860779350732752,0.0007154977737356766,0.06115692419959504,8.057182621760278e-07,0.005142689483352559,0.0009115768771010293,0.7400960353254256,3.457395054739763e-06,0.08421067756802986,1.739094535528068e-13,7.627728648738318e-05,0.01172540923015401,0.9747304029592884,3.229130341295079e-07,0.009341173135672636,7.926876090081104e-12,0.0009578353302267476,0.03004687315566922,0.1995250609563342,0.0001051891779183376,0.001737268240493169,5.214384907007192e-07,0.001235794177657537,0.0004730969291752476,0.2125589249311121,2.962662743051271e-07,0.0239282185477977,1.323937631872051e-11,0.02061175684525339,0.02642877738182964,0.4877549725083089,1.543509194853229e-09,0.01911612960130758,2.043510692769885e-18,6.789859092711976e-07,0.05325192464178121,0.03737181340666142,0.0001287825382008887,0.0001150412304981014,1.6333758294129e-10,0.05591926181673262,0.128058890791509,0.2632264671142657,1.708019162609766e-10,4.244557857738722e-05,8.917795435162223e-15,1.902070171521207e-07,0.008980153141214453,0.2426064947455166,1.660406770614536e-07,0.02257633644153463,5.097383532104826e-20,0.00257279409117535,0.2121839153365726,0.124535310502988,0.000661952897302537,0.3543397674985094,1.980309922721872e-06,0.06286056225083596,0.2905326854105297,0.05785953114422484,0.0001452939842295467,0.1360464495045452,2.042709741657292e-11,5.592105899823105e-05,0.08082243678533044,0.001905756489670829,0.0009237786269152029,0.03958480516870051,6.693482863205691e-19,1.671989013269932e-06,0.3290128824995892,0.1218125420829321,0.005428007202939905,0.001829949276902479,5.819374549865843e-06,0.1038943271544669,0.08339205762167184,0.8983343721069305,7.368426850456634e-06,0.01094524930970989,1.514398899129539e-12,0.006521712088683757,0.08334363846052668,0.1849949096540376,9.85728801537842e-05,0.01379327126456735,1.20382981759584e-10,5.178469012034217e-05,0.1003448313124398,0.8056853344189893,0.007521636907017382,0.0001096894278221173,9.759541702669269e-06,0.2663527727085486,0.09920936798356528,0.3562881269894755,1.613220362127058e-06,0.0002967244201917238,2.425328182977483e-10,0.0006323961317074675,0.01065973974904146,0.2494518141011025,9.0979445262085e-06,0.0006058081100108881,1.705046063155196e-13,5.323537003944404e-07,0.0234392253938357,0.5903761282235109,6.466423886674922e-08,0.01414261457325099,3.599735978240857e-06,0.02260030721519483,0.1618362987963551,0.2683322352010548,4.895370054825695e-05,0.03860016043587197,3.153179119368272e-12,0.0003211884528738719,0.5352176639559652,0.01072105638668801,4.778488917650342e-05,5.661435198750429e-05,2.471869843605393e-20,2.847123353365489e-06,0.910178763089186,0.1120484721698132,0.003945442477876491,0.007766703105521697,2.006084166630643e-08,0.0001712330436302411,0.3736732928077241,0.5507384585810808,4.191339015904529e-06,0.007615802614291145,2.23385987650326e-14,3.417525376172359e-06,0.06495799495776652,0.4270193094621068,2.688474048542118e-10,0.02914339937521427,2.529650287737393e-14,0.0006494144279047264,2.335428833193902e-06,0.8187290808483728,2.483176220819443e-05,0.164457258602204,2.459431852229219e-10,5.671979892559566e-05,0.1027024741235592,0.07704624570374623,2.208031264432561e-10,0.007858547636434083,2.699693745996573e-11,0.0004529513583872008,0.0002135286327016451,0.01602027496740754,2.891869464760198e-06,0.9168951182871263,2.038486221495418e-14,3.057311081066343e-08],[[5.005779741484513,25.91311259684369],[2.738704314443376,42.53696815417216],[9.237319785323947,29.16105910520281],[-5.074691940328508,35.72014925550973],[21.6628435817776,40.64898203243979],[9.705703769775278,47.02288415276102],[8.556764469889471,25.56913663378285],[-2.977913100564654,31.43644822549631],[17.95010411861665,35.33894766081649],[-9.224571567973033,22.36214498151483],[21.64757872377076,38.9481595401087],[17.19331191328641,48.02423930341787],[1.936116031174674,15.89389124273305],[-2.769989403187101,26.60071015581635],[16.41066077698547,30.78783741317719],[5.585825566361466,33.04316985181993],[20.29192923412519,34.04743974956443],[24.7538622938544,49.45766364784719],[9.470612962160565,27.97396604312476],[-26.12796441185223,17.26320102353828],[7.776836789863961,28.2312601795629],[-0.9916390644731709,42.58239369966491],[15.75923609028859,34.80360346563633],[9.347309241505998,51.62313311667234],[6.017492116569795,22.90188264886894],[-13.56059776131985,19.04442101232627],[11.42560653482225,27.28532095743566],[-2.20742840015832,34.50291411551612],[22.91260276018516,37.67967105342387],[17.11405939914703,49.42768858704707],[2.249132937721781,17.76146529219801],[-13.52401541456224,13.96615263175627],[11.59180472719392,25.37501398680513],[4.4659477687162,31.44240784112526],[19.30077438003105,33.66218187086555],[9.58405668024794,36.95947530034908],[1.026618864482191,19.80467391006662],[-6.372169852322561,30.13459922764751],[10.75034667140604,31.4901909981966],[11.96053423788369,50.38545111488993],[16.61311807852817,36.08534092407829],[12.58087150255783,49.78198600193406],[6.493946360145302,22.54782087470813],[-5.498598285371678,24.51239109398388],[14.92184798859252,32.29729343424275],[2.414078822646622,33.63214225983391],[22.57559557390265,39.22582242964313],[2.873154097826414,34.07069458274915],[0.88841038911381,14.13301758170327],[-8.343929147680203,17.43009429866914],[13.95881756617715,26.57386964278468],[2.824675526811865,31.34855576494182],[24.50209322241034,37.03273672551127],[20.31190909723604,45.66164298019753],[-0.1358177290529278,19.14564076138002],[1.182675022205033,38.47017355363936],[9.930584060654638,29.6207639559408],[22.35119557637951,65.99194627373763],[24.87071261495309,44.0377016615891],[-0.5122712852192948,40.29240014802144],[-1.748343296842559,13.75432571274866],[-7.204605152113686,26.17606326042744],[19.51766378992834,35.30708362089948],[18.26375784297164,50.44340347141385],[25.38670894263747,40.48092082393597],[27.05943432167473,57.711140168225],[2.105823080053606,14.56144361985236],[-5.655932129392014,22.22799719988197],[12.46729323726117,26.70104453555301],[2.330986265219519,30.49030320534798],[30.04865760817577,44.39278358508805],[7.903132550275254,36.72768005942136],[-3.297269427532903,14.66362595752285],[-4.543368501726817,36.89917887072532],[7.934380151293627,28.48575379793018],[-10.6170394920535,29.3707512610183],[14.44289536591357,33.1116784266267],[-1.098028765788179,41.26779176031456],[-3.865361654408319,12.82441820721797],[-0.527698057457383,31.80114011618953],[7.564710672023234,23.10600558971901],[-3.578536383324528,26.05575239486098],[22.42031730032656,39.20428344623367],[17.76969793918076,50.08804973796016],[-0.7504093506540727,12.88191602043091],[8.237940719244561,35.8985183032589],[5.212737505302916,19.98891719719166],[0.6789590626569508,27.53092894665278],[25.69966913988581,38.56361178490583],[22.45228376835901,52.31290644512384],[-4.763706091781978,14.07902274287283],[-4.087730159404432,34.20478569087486],[4.769212363734521,26.80637954798564],[12.63155358680151,53.76192198700812],[14.46479089636397,34.91120425421698],[-3.725188669330432,39.39337010170592],[-0.9653865816155462,15.40988057687648],[-15.25758949123073,13.4013851115088],[11.90790911334313,29.53050750856325],[5.243918500957361,39.74278154286866],[22.18513079338529,37.43472411562374],[6.383710783361331,38.59731625301534],[-0.7608543850135788,12.19528000289266],[-4.343100146542588,22.34487120948151],[7.556721467771041,22.43856752331303],[3.58588483428428,31.1708112978121],[18.76266721163944,34.09413573163529],[16.03227601576497,45.22992060132587],[-1.800464640369619,20.1481504508628],[-23.5297339816426,18.32661716477277],[3.679859711729631,23.29089484574083],[22.01150263984932,64.71462093205049],[14.9458366435096,37.08823454570763],[-7.845537274599271,28.08971082779557],[-1.288443597588043,14.77635501441857],[-7.972963545868777,22.01657240768077],[12.22023521900487,28.20733766722211],[13.6564867390619,44.86219699686667],[19.86896414237352,36.16296122009123],[12.60705959719983,45.48461184156329],[2.177106213379588,16.34481787392588],[-5.62609741890834,21.53619080902583],[8.45918746173394,21.37204442761388],[9.872554494676926,35.61045630279881],[21.15738939450596,35.20035884931171],[22.6402115056407,50.44113841498278],[1.557130672264693,21.01217065123819],[-13.69504332444114,23.93760752475692],[17.78287804685719,36.05458544761814],[4.987124587107448,43.51798095765579],[16.2083530976897,38.19535803882003],[3.771201525664866,48.82938585019343],[-2.211953577977634,13.12126332918052],[-7.11873318433235,25.40720965670862],[8.811411325393362,24.59080731911506],[0.9343750608245234,34.23507382677654],[24.56522052361467,41.845495935437],[15.29668885592461,50.70047924505593],[-4.761808978699103,9.14102264867269],[3.906686931106479,29.41609679762906],[8.332584643830813,23.36878393797744],[13.85515644192411,39.35018238455415],[27.77935265316323,40.87098161599425],[20.75481956047537,49.49778359274138],[-9.096760265238554,10.19649096586132],[-4.200400539783367,39.56282675342125],[5.481698167740189,27.96547081476936],[7.102036235382633,45.53932631351037],[19.31406303948157,37.90859565152861],[18.83309009764237,57.71063550522868],[-4.283001294788607,11.33595164097639],[-22.05166248216564,11.80530351340834],[11.50329755578044,27.72455302512115],[6.297058549546692,40.4126535951812],[25.88688242246829,41.65338397121392],[21.08276900495723,50.31998487760455],[-0.4362659428961303,14.37887299025465],[-7.957682557802899,18.72920887591032],[17.49977226169175,32.2377386659288],[1.588913485162078,29.38096895389294],[22.91283116400971,37.36849781875791],[10.49740811666756,38.22702294350515],[14.52189664199216,33.53878425309389],[-22.29316296086865,17.66558439668534],[11.51712798732244,30.24351448341839],[-6.66981679624639,38.6838735823478],[27.90839204888585,49.77924933068831],[21.54439488918365,59.99191779400414],[-1.249354762368711,13.53219227128054],[-1.590413028428989,30.54330244259899],[19.53813108293882,35.502125398442],[6.574279682357641,42.73506083526236],[19.99575872118611,35.11119716492932],[14.04769322821434,48.50906960950058],[6.431483921551907,20.52287789154737],[3.196177943440158,30.76462956261671],[10.46540883811197,24.97647259210895],[-13.50379138609391,15.01476083281615],[20.86295791158018,33.95281942999162],[27.14173054404489,55.35383134575808]],[15.4594461691641,22.63783623430777,19.19918944526338,15.32272865759061,31.1559128071087,28.36429396126815,17.06295055183616,14.22926756246583,26.64452588971657,6.568786706770897,30.29786913193973,32.60877560835214,8.915003636953863,11.91536037631462,23.59924909508133,19.3144977090907,27.16968449184481,37.1057629708508,18.72228950264266,-4.432381694156975,18.00404848471343,20.79537731759587,25.28141977796246,30.48522117908917,14.45968738271937,2.741911625503211,19.35546374612895,16.1477428576789,30.29613690680451,33.27087399309706,10.00529911495989,0.2210686085970143,18.48340935699953,17.95417780492073,26.4814781254483,23.27176599029851,10.41564638727441,11.88121468766247,21.12026883480132,31.17299267638682,26.34922950130323,31.18142875224594,14.52088361742672,9.506896404306099,23.60957071141764,18.02311054124026,30.9007090017729,18.47192434028778,7.510713985408542,4.543082575494465,20.26634360448091,17.08661564587684,30.7674149739608,32.98677603871678,9.504911516163546,19.8264242879222,19.77567400829772,44.17157092505857,34.45420713827109,19.89006443140107,6.00299120795305,9.485729054156877,27.41237370541391,34.35358065719274,32.93381488328672,42.38528724494986,8.333633349952986,8.286032535244978,19.58416888640709,16.41064473528375,37.22072059663191,22.31540630484831,5.683178264994975,16.17790518449925,18.2100669746119,9.376855884482401,23.77728689627013,20.08488149726319,4.479528276404825,15.63672102936608,15.33535813087112,11.23860800576822,30.81230037328012,33.92887383857046,6.065753334888418,22.06822951125173,12.60082735124729,14.10494400465486,32.13164046239582,37.38259510674143,4.657658325545428,15.05852776573521,15.78779595586008,33.19673778690481,24.68799757529047,17.83409071618775,7.222246997630467,-0.9281021898609653,20.71920831095319,22.49335002191301,29.80992745450452,22.49051351818834,5.717212808939538,9.000885531469459,14.99764449554204,17.37834806604819,26.42840147163736,30.63109830854542,9.173842905246589,-2.601558408434918,13.48537727873523,43.36306178594991,26.01703559460861,10.12208677659815,6.743955708415261,7.021804430905996,20.21378644311348,29.25934186796428,28.01596268123237,29.04583571938156,9.260962043652736,7.955046695058744,14.91561594467391,22.74150539873787,28.17887412190883,36.54067496031174,11.28465066175144,5.121282100157886,26.91873174723766,24.25255277238162,27.20185556825486,26.30029368792915,5.454654875601443,9.144238236188137,16.70110932225421,17.58472444380053,33.20535822952584,32.99858405049027,2.189606834986793,16.66139186436776,15.85068429090413,26.60266941323913,34.32516713457874,35.12630157660837,0.5498653503113829,17.68121310681894,16.72358449125477,26.3206812744465,28.6113293455051,38.27186280143552,3.526475173093892,-5.123179484378647,19.61392529045079,23.35485607236395,33.7701331968411,35.70137694128089,6.971303523679262,5.385763159053711,24.86875546381027,15.48494121952751,30.14066449138381,24.36221553008636,24.03034044754303,-2.313789282091658,20.88032123537041,16.00702839305071,38.84382068978708,40.76815634159389,6.141418754455914,14.476444707085,27.52012824069041,24.65467025881,27.55347794305772,31.27838141885746,13.47718090654964,16.98040375302844,17.72094071511046,0.7554847233611183,27.4078886707859,41.24778094490149],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[5.268408990922939,10.0287077499034,5.020554658589494,10.27983385668136,4.784289952639107,9.40350306783489,4.304721333839534,8.708029307351643,4.399981674852725,7.992536918814072,4.377648138098403,7.80129599798169,3.5390676463549,7.447096043931333,3.645409093344668,6.961954705720203,3.487782364052728,6.26377934797912,4.662633555814153,10.93407789926865,5.15428098055136,10.98015837665832,4.798962976332153,10.65302457006177,4.272337533711263,8.25020276731542,4.013058870680275,9.288992333189981,3.73658143072401,8.176471076394503,3.933233822949758,6.970277343700161,3.494805526975031,6.840023972902793,3.641410743228078,6.941182020440666,4.731855312134853,9.199288679290399,5.226203795459133,9.682640007254456,4.906777666117035,9.374255791342089,4.062188120966064,7.593823188581004,4.396591490844619,7.899254870783479,4.213085986403136,7.894061850692249,3.358240127349017,6.535139813674025,3.198613101637652,7.232380531223416,3.177210861879213,6.427558953278131,4.858707228314191,9.396023580390819,4.961700352258232,10.99697053350607,4.829862236413126,10.28231096418581,3.922713973932234,8.446469079618579,3.995271896272422,8.142568579951003,3.819360126674401,7.755946719544494,3.158188393173992,7.070117597305976,3.609042841178014,7.139943580960949,3.637028924071724,7.308616306269422,4.525940414604285,10.4430484124526,5.178711337539314,10.07646636651825,4.704320020496524,10.6757026977898,4.223094271350928,8.180319478297536,3.932487670924917,7.498504846217879,4.246926674227657,8.177666061056719,3.456548119892189,7.013485582287513,3.746578426122338,6.808458827926318,3.261720620192767,7.571318638792642,4.748152368013415,9.649276461342529,5.553114332238721,10.3643828784252,5.152262544049363,10.86538413467396,4.143511628207307,7.25171646786644,4.459129775599108,8.729411177878729,3.858677030704779,8.151161599874968,3.285096323667307,6.766876134725043,3.773370690881229,6.994303841009531,3.887374842180736,7.403217041134084,5.530800216600332,10.54732223534086,4.941756776730442,10.76069788085906,5.579631270787901,9.055271923179561,4.064952297229441,7.588394726350025,4.045292467865289,7.896129087129303,4.122947473653096,8.319163205888016,3.592298142128217,6.887141683500118,3.27412310467005,6.525980981464271,3.56066909682695,7.049071895215366,4.902447780072346,9.482998020733085,4.60426149120246,9.709335549155103,5.540474020129532,11.35414761185861,3.87983670359155,8.230193808494199,3.992735517122067,8.42623398010304,4.372510165147393,8.958389242761443,3.525136410307446,6.468045642507295,3.812507770005659,6.464398522611456,3.319451688981963,7.287930384686133,4.861678864217588,11.02783323623335,5.665653805913962,9.685757912560021,4.68560975582342,9.796697225195816,3.952137848096314,8.566988919367283,4.104541318978037,8.632431056337992,3.989472774463853,7.3980316029163,3.756456747573083,6.766602314717695,3.736889245150504,7.046822494578957,3.6653106522267,7.030990339941658,4.792038389727843,10.0691477626996,4.718835428032167,11.42861176101058,5.511206137090078,9.688336467965611,3.740245055181077,8.130946654061839,4.039445307285852,9.149934211266826,3.824731184591515,8.719925750086974,3.572947388488818,6.99012655718467,3.679356879414178,7.231029583801318,3.319003544111647,7.153327207932496],["two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided","two.sided"],["Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test","Paired t-test"],["post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre","post and pre"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.rep<\/th>\n      <th>.dgp_name<\/th>\n      <th>.method_name<\/th>\n      <th>n<\/th>\n      <th>mean_diff<\/th>\n      <th>sd<\/th>\n      <th>statistic<\/th>\n      <th>parameter<\/th>\n      <th>p.value<\/th>\n      <th>conf.int<\/th>\n      <th>estimate<\/th>\n      <th>null.value<\/th>\n      <th>stderr<\/th>\n      <th>alternative<\/th>\n      <th>method<\/th>\n      <th>data.name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[4,5,6,7,8,9,11,12,13]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":".rep","targets":1},{"name":".dgp_name","targets":2},{"name":".method_name","targets":3},{"name":"n","targets":4},{"name":"mean_diff","targets":5},{"name":"sd","targets":6},{"name":"statistic","targets":7},{"name":"parameter","targets":8},{"name":"p.value","targets":9},{"name":"conf.int","targets":10},{"name":"estimate","targets":11},{"name":"null.value","targets":12},{"name":"stderr","targets":13},{"name":"alternative","targets":14},{"name":"method","targets":15},{"name":"data.name","targets":16}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>results<span class="sc">$</span>viz_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`Power plot`</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="simulator_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="pros-cons-3" class="level2">
<h2 class="anchored" data-anchor-id="pros-cons-3">Pros &amp; cons</h2>
<div class="columns">
<div class="column">
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pros
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Automated generation of an interactive R Markdown document (see <code>init_docs()</code> and <code>render_docs()</code> functions);</li>
<li>Beginner friendly;</li>
<li>Computing experimental replicates in parallel easily with future by adding <code>plan(multisession, workers = n_workers)</code> before <code>run_experiment(experiment, ...)</code>;</li>
<li>Flexibility of the return fitting results of the simulation (not necessarily the same outputs for all methods);</li>
<li>We can change the evaluation metrics and the visualization without re-fitting all the simulations by saving the fit_results tibble.</li>
</ul>
</div>
</div>
</div><div class="column">
<div class="callout callout-style-default callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cons
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Likely not as fast/optimized as some alternatives;</li>
<li>Only save the simulation results computed from the evaluation functions. We cannot debug a strange simulation result.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="tentative-conclusion" class="level1">
<h1>Tentative conclusion</h1>
<p>The four tools reviewed all seem to do the job. It makes sense to choose one or the other based on coding habits, <em>i.e.</em>:</p>
<ul>
<li><p><a href="https://statisfactions.github.io/simpr/">{<strong>simpr</strong>}</a> is tidyverse-friendly, and seems to be easy to learn. Parallelization is built-in, powered by the <a href="https://www.futureverse.org"><strong>futureverse</strong></a>.</p></li>
<li><p><a href="https://jacobbien.github.io/simulator/">{<strong>simulator</strong>}</a> uses base R, and is flexible and modular: the components of the simulation study (simulation model, methods, evaluation metrics) are stored on disk as R functions, and intermediate results are also stored on disk. It also outputs an Rmarkdown report.</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/SimEngine/vignettes/SimEngine.html">{<strong>simEngine</strong>}</a> is very well documented. It also has a built-in parallelization scheme based on the {<strong>parallel</strong>} package which is tailored towards simulation studies on a cluster. The package implements the idea of <em>updating</em> a simulation study for, say, add more bootstrap samples or more Monte Carlo replicates without re-running the whole simulation study.</p></li>
<li><p><a href="https://yu-group.github.io/simChef/index.html">{<strong>simChef</strong>}</a> is pipe-friendly and implements a modular approach to simulations where the user must define a set of functions that implements the various parts of a simulation study: data-generating process, methods to be applied to the data, evaluation metrics to summarize the results of the applied method and visualization. It is not yet on CRAN. It is object-oriented and modular. It also outputs a Rmarkdown report.</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>